!function(){"use strict";var t=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(t,e){return t(e={exports:{}},e.exports),e.exports}var i=n(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),o=n(function(t){var e=t.exports={version:"2.6.0"};"number"==typeof __e&&(__e=e)}),a=(o.version,function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}),r=function(t,e,n){if(a(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)}}return function(){return t.apply(e,arguments)}},s=function(t){return"object"==typeof t?null!==t:"function"==typeof t},p=function(t){if(!s(t))throw TypeError(t+" is not an object!");return t},c=function(t){try{return!!t()}catch(t){return!0}},l=!c(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),h=i.document,u=s(h)&&s(h.createElement),f=function(t){return u?h.createElement(t):{}},x=!l&&!c(function(){return 7!=Object.defineProperty(f("div"),"a",{get:function(){return 7}}).a}),_=function(t,e){if(!s(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!s(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!s(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!s(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")},d=Object.defineProperty,g={f:l?Object.defineProperty:function(t,e,n){if(p(t),e=_(e,!0),p(n),x)try{return d(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},m=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},b=l?function(t,e,n){return g.f(t,e,m(1,n))}:function(t,e,n){return t[e]=n,t},v={}.hasOwnProperty,y=function(t,e){return v.call(t,e)},k=function(t,e,n){var a,s,p,c=t&k.F,l=t&k.G,h=t&k.S,u=t&k.P,f=t&k.B,x=t&k.W,_=l?o:o[e]||(o[e]={}),d=_.prototype,g=l?i:h?i[e]:(i[e]||{}).prototype;for(a in l&&(n=e),n)(s=!c&&g&&void 0!==g[a])&&y(_,a)||(p=s?g[a]:n[a],_[a]=l&&"function"!=typeof g[a]?n[a]:f&&s?r(p,i):x&&g[a]==p?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(p):u&&"function"==typeof p?r(Function.call,p):p,u&&((_.virtual||(_.virtual={}))[a]=p,t&k.R&&d&&!d[a]&&b(d,a,p)))};k.F=1,k.G=2,k.S=4,k.P=8,k.B=16,k.W=32,k.U=64,k.R=128;var w=k;w(w.S+w.F*!l,"Object",{defineProperty:g.f});var E=o.Object,C=function(t,e,n){return E.defineProperty(t,e,n)};function P(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),C(t,i.key,i)}}var T,S=function(t,e,n){return e&&P(t.prototype,e),n&&P(t,n),t},B=Math.ceil,O=Math.floor,M=function(t){return isNaN(t=+t)?0:(t>0?O:B)(t)},N=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},j=b,A={},L={}.toString,z=function(t){return L.call(t).slice(8,-1)},H=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==z(t)?t.split(""):Object(t)},F=function(t){return H(N(t))},I=Math.min,D=function(t){return t>0?I(M(t),9007199254740991):0},R=Math.max,G=Math.min,W=n(function(t){var e=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:o.version,mode:"pure",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})}),Y=0,q=Math.random(),U=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++Y+q).toString(36))},$=W("keys"),V=function(t){return $[t]||($[t]=U(t))},K=(T=!1,function(t,e,n){var i,o=F(t),a=D(o.length),r=function(t,e){return(t=M(t))<0?R(t+e,0):G(t,e)}(n,a);if(T&&e!=e){for(;a>r;)if((i=o[r++])!=i)return!0}else for(;a>r;r++)if((T||r in o)&&o[r]===e)return T||r||0;return!T&&-1}),X=V("IE_PROTO"),J=function(t,e){var n,i=F(t),o=0,a=[];for(n in i)n!=X&&y(i,n)&&a.push(n);for(;e.length>o;)y(i,n=e[o++])&&(~K(a,n)||a.push(n));return a},Z="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Q=Object.keys||function(t){return J(t,Z)},tt=l?Object.defineProperties:function(t,e){p(t);for(var n,i=Q(e),o=i.length,a=0;o>a;)g.f(t,n=i[a++],e[n]);return t},et=i.document,nt=et&&et.documentElement,it=V("IE_PROTO"),ot=function(){},at=function(){var t,e=f("iframe"),n=Z.length;for(e.style.display="none",nt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),at=t.F;n--;)delete at.prototype[Z[n]];return at()},rt=Object.create||function(t,e){var n;return null!==t?(ot.prototype=p(t),n=new ot,ot.prototype=null,n[it]=t):n=at(),void 0===e?n:tt(n,e)},st=n(function(t){var e=W("wks"),n=i.Symbol,o="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=o&&n[t]||(o?n:U)("Symbol."+t))}).store=e}),pt=g.f,ct=st("toStringTag"),lt=function(t,e,n){t&&!y(t=n?t:t.prototype,ct)&&pt(t,ct,{configurable:!0,value:e})},ht={};b(ht,st("iterator"),function(){return this});var ut=function(t){return Object(N(t))},ft=V("IE_PROTO"),xt=Object.prototype,_t=Object.getPrototypeOf||function(t){return t=ut(t),y(t,ft)?t[ft]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?xt:null},dt=st("iterator"),gt=!([].keys&&"next"in[].keys()),mt=function(){return this},bt=function(t,e,n,i,o,a,r){!function(t,e,n){t.prototype=rt(ht,{next:m(1,n)}),lt(t,e+" Iterator")}(n,e,i);var s,p,c,l=function(t){if(!gt&&t in x)return x[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},h=e+" Iterator",u="values"==o,f=!1,x=t.prototype,_=x[dt]||x["@@iterator"]||o&&x[o],d=_||l(o),g=o?u?l("entries"):d:void 0,v="Array"==e&&x.entries||_;if(v&&(c=_t(v.call(new t)))!==Object.prototype&&c.next&&lt(c,h,!0),u&&_&&"values"!==_.name&&(f=!0,d=function(){return _.call(this)}),!r||!gt&&!f&&x[dt]||b(x,dt,d),A[e]=d,A[h]=mt,o)if(s={values:u?d:l("values"),keys:a?d:l("keys"),entries:g},r)for(p in s)p in x||j(x,p,s[p]);else w(w.P+w.F*(gt||f),e,s);return s},vt=function(t){return function(e,n){var i,o,a=String(N(e)),r=M(n),s=a.length;return r<0||r>=s?t?"":void 0:(i=a.charCodeAt(r))<55296||i>56319||r+1===s||(o=a.charCodeAt(r+1))<56320||o>57343?t?a.charAt(r):i:t?a.slice(r,r+2):o-56320+(i-55296<<10)+65536}}(!0);bt(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=vt(e,n),this._i+=t.length,{value:t,done:!1})});var yt=function(t,e){return{value:e,done:!!t}};bt(Array,"Array",function(t,e){this._t=F(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,yt(1)):yt(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");A.Arguments=A.Array;for(var kt=st("toStringTag"),wt="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Et=0;Et<wt.length;Et++){var Ct=wt[Et],Pt=i[Ct],Tt=Pt&&Pt.prototype;Tt&&!Tt[kt]&&b(Tt,kt,Ct),A[Ct]=A.Array}var St={f:st},Bt=St.f("iterator"),Ot=n(function(t){var e=U("meta"),n=g.f,i=0,o=Object.isExtensible||function(){return!0},a=!c(function(){return o(Object.preventExtensions({}))}),r=function(t){n(t,e,{value:{i:"O"+ ++i,w:{}}})},p=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!s(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!y(t,e)){if(!o(t))return"F";if(!n)return"E";r(t)}return t[e].i},getWeak:function(t,n){if(!y(t,e)){if(!o(t))return!0;if(!n)return!1;r(t)}return t[e].w},onFreeze:function(t){return a&&p.NEED&&o(t)&&!y(t,e)&&r(t),t}}}),Mt=(Ot.KEY,Ot.NEED,Ot.fastKey,Ot.getWeak,Ot.onFreeze,g.f),Nt=function(t){var e=o.Symbol||(o.Symbol={});"_"==t.charAt(0)||t in e||Mt(e,t,{value:St.f(t)})},jt={f:Object.getOwnPropertySymbols},At={f:{}.propertyIsEnumerable},Lt=Array.isArray||function(t){return"Array"==z(t)},zt=Z.concat("length","prototype"),Ht={f:Object.getOwnPropertyNames||function(t){return J(t,zt)}},Ft=Ht.f,It={}.toString,Dt="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Rt={f:function(t){return Dt&&"[object Window]"==It.call(t)?function(t){try{return Ft(t)}catch(t){return Dt.slice()}}(t):Ft(F(t))}},Gt=Object.getOwnPropertyDescriptor,Wt={f:l?Gt:function(t,e){if(t=F(t),e=_(e,!0),x)try{return Gt(t,e)}catch(t){}if(y(t,e))return m(!At.f.call(t,e),t[e])}},Yt=Ot.KEY,qt=Wt.f,Ut=g.f,$t=Rt.f,Vt=i.Symbol,Kt=i.JSON,Xt=Kt&&Kt.stringify,Jt=st("_hidden"),Zt=st("toPrimitive"),Qt={}.propertyIsEnumerable,te=W("symbol-registry"),ee=W("symbols"),ne=W("op-symbols"),ie=Object.prototype,oe="function"==typeof Vt,ae=i.QObject,re=!ae||!ae.prototype||!ae.prototype.findChild,se=l&&c(function(){return 7!=rt(Ut({},"a",{get:function(){return Ut(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=qt(ie,e);i&&delete ie[e],Ut(t,e,n),i&&t!==ie&&Ut(ie,e,i)}:Ut,pe=function(t){var e=ee[t]=rt(Vt.prototype);return e._k=t,e},ce=oe&&"symbol"==typeof Vt.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Vt},le=function(t,e,n){return t===ie&&le(ne,e,n),p(t),e=_(e,!0),p(n),y(ee,e)?(n.enumerable?(y(t,Jt)&&t[Jt][e]&&(t[Jt][e]=!1),n=rt(n,{enumerable:m(0,!1)})):(y(t,Jt)||Ut(t,Jt,m(1,{})),t[Jt][e]=!0),se(t,e,n)):Ut(t,e,n)},he=function(t,e){p(t);for(var n,i=function(t){var e=Q(t),n=jt.f;if(n)for(var i,o=n(t),a=At.f,r=0;o.length>r;)a.call(t,i=o[r++])&&e.push(i);return e}(e=F(e)),o=0,a=i.length;a>o;)le(t,n=i[o++],e[n]);return t},ue=function(t){var e=Qt.call(this,t=_(t,!0));return!(this===ie&&y(ee,t)&&!y(ne,t))&&(!(e||!y(this,t)||!y(ee,t)||y(this,Jt)&&this[Jt][t])||e)},fe=function(t,e){if(t=F(t),e=_(e,!0),t!==ie||!y(ee,e)||y(ne,e)){var n=qt(t,e);return!n||!y(ee,e)||y(t,Jt)&&t[Jt][e]||(n.enumerable=!0),n}},xe=function(t){for(var e,n=$t(F(t)),i=[],o=0;n.length>o;)y(ee,e=n[o++])||e==Jt||e==Yt||i.push(e);return i},_e=function(t){for(var e,n=t===ie,i=$t(n?ne:F(t)),o=[],a=0;i.length>a;)!y(ee,e=i[a++])||n&&!y(ie,e)||o.push(ee[e]);return o};oe||(j((Vt=function(){if(this instanceof Vt)throw TypeError("Symbol is not a constructor!");var t=U(arguments.length>0?arguments[0]:void 0),e=function(n){this===ie&&e.call(ne,n),y(this,Jt)&&y(this[Jt],t)&&(this[Jt][t]=!1),se(this,t,m(1,n))};return l&&re&&se(ie,t,{configurable:!0,set:e}),pe(t)}).prototype,"toString",function(){return this._k}),Wt.f=fe,g.f=le,Ht.f=Rt.f=xe,At.f=ue,jt.f=_e,St.f=function(t){return pe(st(t))}),w(w.G+w.W+w.F*!oe,{Symbol:Vt});for(var de="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ge=0;de.length>ge;)st(de[ge++]);for(var me=Q(st.store),be=0;me.length>be;)Nt(me[be++]);w(w.S+w.F*!oe,"Symbol",{for:function(t){return y(te,t+="")?te[t]:te[t]=Vt(t)},keyFor:function(t){if(!ce(t))throw TypeError(t+" is not a symbol!");for(var e in te)if(te[e]===t)return e},useSetter:function(){re=!0},useSimple:function(){re=!1}}),w(w.S+w.F*!oe,"Object",{create:function(t,e){return void 0===e?rt(t):he(rt(t),e)},defineProperty:le,defineProperties:he,getOwnPropertyDescriptor:fe,getOwnPropertyNames:xe,getOwnPropertySymbols:_e}),Kt&&w(w.S+w.F*(!oe||c(function(){var t=Vt();return"[null]"!=Xt([t])||"{}"!=Xt({a:t})||"{}"!=Xt(Object(t))})),"JSON",{stringify:function(t){for(var e,n,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(n=e=i[1],(s(e)||void 0!==t)&&!ce(t))return Lt(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!ce(e))return e}),i[1]=e,Xt.apply(Kt,i)}}),Vt.prototype[Zt]||b(Vt.prototype,Zt,Vt.prototype.valueOf),lt(Vt,"Symbol"),lt(Math,"Math",!0),lt(i.JSON,"JSON",!0),Nt("asyncIterator"),Nt("observable");var ve=o.Symbol,ye=n(function(t){function e(t){return(e="function"==typeof ve&&"symbol"==typeof Bt?function(t){return typeof t}:function(t){return t&&"function"==typeof ve&&t.constructor===ve&&t!==ve.prototype?"symbol":typeof t})(t)}function n(i){return"function"==typeof ve&&"symbol"===e(Bt)?t.exports=n=function(t){return e(t)}:t.exports=n=function(t){return t&&"function"==typeof ve&&t.constructor===ve&&t!==ve.prototype?"symbol":e(t)},n(i)}t.exports=n});var ke=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};var we=function(t,e){return!e||"object"!==ye(e)&&"function"!=typeof e?ke(t):e},Ee=function(t,e){var n=(o.Object||{})[t]||Object[t],i={};i[t]=e(n),w(w.S+w.F*c(function(){n(1)}),"Object",i)};Ee("getPrototypeOf",function(){return function(t){return _t(ut(t))}});var Ce=o.Object.getPrototypeOf,Pe=function(t,e){if(p(t),!s(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},Te={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=r(Function.call,Wt.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return Pe(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:Pe};w(w.S,"Object",{setPrototypeOf:Te.set});var Se=o.Object.setPrototypeOf,Be=n(function(t){function e(n){return t.exports=e=Se?Ce:function(t){return t.__proto__||Ce(t)},e(n)}t.exports=e});w(w.S,"Object",{create:rt});var Oe=o.Object,Me=function(t,e){return Oe.create(t,e)},Ne=n(function(t){function e(n,i){return t.exports=e=Se||function(t,e){return t.__proto__=e,t},e(n,i)}t.exports=e});var je=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Me(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ne(t,e)},Ae={$prefix:"pixnet-happix-pilot",$mobile_screen_max_width:"768px",$desktop_screen_min_width:"769px",$big_happix_w:"70px",$big_happix_h:"80px",$color_white:"#ffffff",$color_black:"#000000",$color_grey:"#e9e9e9",$color_light_grey:"#f6f6f6",$color_deep_grey:"#4a4a4a",$color_font_grey:"#5e5f6a",$color_red:"#ff6868",$color_dark_red:"#f65f5e",$color_light_orange:"#fe7c46",$color_orange:"#f04e2f",$color_blue:"#6eacf5",$color_light_blue:"#00aef0",$color_deep_blue:"#4257ac",$color_dark_blue:"#4a90e2",$color_box_shadow:"rgba(0, 0, 0, 0.25)",$messenger_card_border_radius:"20px",$card_content_padding:"15px"},Le=function(){function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t(this,e),this.containerElement=n,this.props=i}return S(e,[{key:"getCssPrefix",value:function(){return Ae.$prefix}}]),e}(),ze=Wt.f;Ee("getOwnPropertyDescriptor",function(){return function(t,e){return ze(F(t),e)}});var He=o.Object,Fe=function(t,e){return He.getOwnPropertyDescriptor(t,e)},Ie=o.Object.getOwnPropertySymbols;Ee("keys",function(){return function(t){return Q(ut(t))}});var De=o.Object.keys;var Re=function(t,e,n){return e in t?C(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t};var Ge,We,Ye=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=De(n);"function"==typeof Ie&&(i=i.concat(Ie(n).filter(function(t){return Fe(n,t).enumerable}))),i.forEach(function(e){Re(t,e,n[e])})}return t},qe=["isIncludeGAScript","isIncludePAScript"],Ue={currentOptions:{variant:"",projectName:"",domainAppend:"",loginURL:"",logoutURL:"",memberUniqid:"",giftNotificationContent:{},ga:{isIncludePAScript:!0,trackingId:""},pa:{isIncludePAScript:!0,venue:""},style:{width:{pilotWidth:960},zIndex:{pilotZIndex:2}}},isInvalidConfig:function(t,e){return!t.hasOwnProperty(e)&&-1===qe.indexOf(e)},setOptions:function(t){if(!t)throw new Error("ERROR: PixHappixPilot options are required.");if(!t instanceof Object)throw new Error("ERROR: PixHappixPilot options should be json object.");!function t(e,n,i){return De(n).forEach(function(o){var a=e?e+".":"";Ue.isInvalidConfig(i,o),i[o]instanceof Object&&t("".concat(a).concat(o),n[o],i[o])})}("",Ue.currentOptions,t),Ue.currentOptions=Ye({},Ue.currentOptions,t)},getOptions:function(){return{getVariant:function(){return Ue.currentOptions.variant},getProjectName:function(){return Ue.currentOptions.projectName},getDomainAppend:function(){return Ue.currentOptions.domainAppend},getLoginURL:function(){return Ue.currentOptions.loginURL},getLogoutURL:function(){return Ue.currentOptions.logoutURL},getMemberUniqid:function(){return Ue.currentOptions.memberUniqid},getGiftNotificationContent:function(){return Ue.currentOptions.giftNotificationContent},getTrackingId:function(){return Ue.currentOptions.ga.trackingId},isIncludeGAScript:function(){return Ue.currentOptions.ga.isIncludeGAScript},getVenue:function(){return Ue.currentOptions.pa.venue},isIncludePAScript:function(){return Ue.currentOptions.pa.isIncludePAScript},getPilotWidth:function(){return Ue.currentOptions.style.width.pilotWidth},getPilotZIndex:function(){return Ue.currentOptions.style.zIndex.pilotZIndex}}}},$e="https://s.pixfs.net/common/pixhappix-ui-module/images",Ve=400222080391957,Ke="CLOUDY",Xe="RAINY",Je="SUNNY",Ze=(Re(Ge={},Ke,"".concat($e,"/weather_cloud.svg")),Re(Ge,Xe,"".concat($e,"/weather_rain.svg")),Re(Ge,Je,"".concat($e,"/weather_sun.svg")),Ge),Qe=(Re(We={},Ke,"陰天還是要防曬唷～"),Re(We,Xe,"出門記得帶把傘！"),Re(We,Je,"今天是晴朗的好天氣"),We),tn={wrapper:function(t){return{isEmpty:function(){return void 0===t},getElement:function(){return t},getElementByPostfix:function(e){return tn.wrapper(t.querySelector(".".concat(Ae.$prefix,"__").concat(e)))},getElementBySelector:function(e){return tn.wrapper(t.querySelector(e))},getParentNode:function(){return tn.wrapper(t.parentNode)},getDataset:function(){return t.dataset},hasClass:function(e){return t.classList.contains(e)},addClass:function(e){return t.classList.add(e),this},removeClass:function(e){return t.classList.remove(e),this},toggleClass:function(e){return t.classList.toggle(e),this},appendChild:function(e){return t.appendChild(e),this},setHTML:function(e){return t.innerHTML=e,this},setStyle:function(e,n){return t.style[e]=n,this},bindEvent:function(e,n){return t.addEventListener(e,n),this},unbindEvent:function(e,n){return t.removeEventListener(e,n),this},fireEvent:function(e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)},scrollToTop:function(){t.scrollTop=0}}},getElementByPostfix:function(t){return tn.getElementBySelector(".".concat(Ae.$prefix,"__").concat(t))},getElementBySelector:function(t){return tn.wrapper(document.querySelector(t))},createElement:function(t){var e=document.createElement("div");e.innerHTML=t;var n=document.createDocumentFragment();return Array.prototype.slice.apply(e.childNodes).map(function(t){return n.appendChild(t)}),n}},en=function(){var t,e,n,i,o;"undefined"==typeof ga&&(t=window,e=document,n="script","ga",t.GoogleAnalyticsObject="ga",t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=1*new Date,i=e.createElement(n),o=e.getElementsByTagName(n)[0],i.async=1,i.src="https://www.google-analytics.com/analytics.js",o.parentNode.insertBefore(i,o))},nn=function(t){ga("create",t,"auto","pixnetHappixPilot"),ga("pixnetHappixPilot.send","pageview")},on=function(t,e){ga("create",t,"auto","CTATracker"),ga("CTATracker.set","userId",e)},an=function(t,e){var n,i,o,a;"undefined"==typeof _piq&&(i="script",o=(n=document).getElementsByTagName(i)[0],(a=n.createElement(i)).async=1,a.src="https://s.pixanalytics.com/js/pi.min.js",o.parentNode.insertBefore(a,o))},rn=function(t){ga("pixnetHappixPilot.set","userId",t)},sn=function(t){"undefined"!=typeof ga&&ga("pixnetHappixPilot.send","event",t.category,t.action,t.label,t.id),"undefined"!=typeof _piq&&_piq.push(["trackEvent",t.category,t.action,t.label,t.id])},pn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Ue.getOptions().getGiftNotificationContent().project_id+"_CTA";"undefined"!=typeof ga&&ga("CTATracker.send","event",n,t,e),"undefined"!=typeof _piq&&_piq.push(["trackEvent",n,t,e])},cn=function(t){(new Image).src=t},ln=function(t,e,n){var i="?with=".concat(e,"&height=").concat(n,"&url=").concat(encodeURIComponent(t));return"".concat("https://imageproxy.pimg.tw/zoomcrop").concat(i)};function hn(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}hn('@media screen and (max-width:768px){.pixnet-happix-pilot__sticky-box{position:absolute;right:0;bottom:45px;left:0;z-index:1;width:100%;max-width:100vw;height:100px;font-family:PingFang TC;color:#000;background:#fff;border-radius:10px 10px 0 0;will-change:transform;-webkit-transform:translateY(100%);transform:translateY(100%);-webkit-transition:-webkit-transform .5s;transition:-webkit-transform .5s;transition:transform .5s;transition:transform .5s,-webkit-transform .5s}.pixnet-happix-pilot__sticky-box a{text-decoration:none}.pixnet-happix-pilot__sticky-box.show{-webkit-box-shadow:0 0 20px rgba(0,0,0,.25);box-shadow:0 0 20px rgba(0,0,0,.25);-webkit-transform:translateY(0);transform:translateY(0)}.pixnet-happix-pilot__sticky-box__link--title{-ms-flex-line-pack:center;align-content:center;overflow:hidden;width:calc(100% - 44px);height:24px;padding-top:5px;padding-left:10px;font-weight:500;font-size:17px;line-height:24px;letter-spacing:1px}.pixnet-happix-pilot__sticky-box__link--title,.pixnet-happix-pilot__sticky-box__link__img{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.pixnet-happix-pilot__sticky-box__link__img{justify-items:center;margin-right:3px;border-radius:50%;background-color:#f6f6f6}.pixnet-happix-pilot__sticky-box__title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pixnet-happix-pilot__sticky-box__img{width:55px!important;height:55px!important;margin:6px 10px 10px!important;border-radius:10px}.pixnet-happix-pilot__sticky-box__info--description{position:absolute;top:33px;width:calc(100% - 40px);font-size:13px!important;letter-spacing:1px;color:#5e5f6a!important;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pixnet-happix-pilot__sticky-box__link--description{margin-top:2px;top:33px}.pixnet-happix-pilot__sticky-box__price{position:absolute;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;bottom:8px;left:75px}.pixnet-happix-pilot__sticky-box__price div{pointer-events:none}.pixnet-happix-pilot__sticky-box__price>div:nth-child(2){margin-right:12px;line-height:10px}.pixnet-happix-pilot__sticky-box__price>div>strike{font-size:10px!important;color:#5e5f6a!important}.pixnet-happix-pilot__sticky-box__price>div>span:first-child{font-size:16px!important;margin-right:5px;color:#f65f5e!important;font-weight:600}.pixnet-happix-pilot__sticky-box__price>div>span:nth-child(2){font-size:10px!important;color:#5e5f6a!important}.pixnet-happix-pilot__sticky-box__button{position:absolute;right:10px;bottom:10px;padding:8px 27px;font-weight:500;font-size:15px;letter-spacing:1px;color:#fff;background-color:#00aef0;border-radius:6px}.pixnet-happix-pilot__sticky-box__close{position:absolute;top:0;right:0;width:36px;height:36px;color:transparent}.pixnet-happix-pilot__sticky-box__close img{pointer-events:none}.pixnet-happix-pilot__sticky-box__info{padding-left:30px;font-size:17px;line-height:2;color:#f04e2f;background:transparent 5px no-repeat}.pixnet-happix-pilot__sticky-box__link--button{position:absolute;right:10px;bottom:10px;width:120px;height:36px;font-size:13px;color:#fff;background-color:#f04e2f;border-radius:6px}.pixnet-happix-pilot__sticky-box__btn{display:inline-block;width:120px;height:36px;font-weight:500;font-size:15px;line-height:36px;letter-spacing:1px;text-align:center}.pixnet-happix-pilot__sticky-box__info--date,.pixnet-happix-pilot__sticky-box__info--people,.pixnet-happix-pilot__sticky-box__link--description,.pixnet-happix-pilot__sticky-box__link--price,.pixnet-happix-pilot__sticky-box__link--title{color:inherit;top:33px}.pixnet-happix-pilot__sticky-box__btn--red{background-color:#f04e2f}.pixnet-happix-pilot__sticky-box__btn--blue{background-color:#00aef0}}@media screen and (min-width:769px){.pixnet-happix-pilot__sticky-box{position:absolute;right:40px;bottom:65px;z-index:1;width:360px;max-width:100vw;height:120px;font-family:PingFang TC;color:#000;background:#fff;border-radius:10px;will-change:transform;-webkit-transform:translateY(200px);transform:translateY(200px);-webkit-transition:-webkit-transform .5s;transition:-webkit-transform .5s;transition:transform .5s;transition:transform .5s,-webkit-transform .5s;cursor:pointer}.pixnet-happix-pilot__sticky-box:after{content:"";position:absolute;right:40px;bottom:-20px;width:20px;height:20px;background-image:url(https://s.pixfs.net/common/pixhappix-ui-module/images/cta_triangle_white.svg)}.pixnet-happix-pilot__sticky-box a{text-decoration:none}.pixnet-happix-pilot__sticky-box.show{-webkit-box-shadow:0 0 20px rgba(0,0,0,.25);box-shadow:0 0 20px rgba(0,0,0,.25);-webkit-transform:translateY(0);transform:translateY(0)}.pixnet-happix-pilot__sticky-box__link--title{-ms-flex-line-pack:center;align-content:center;overflow:hidden;width:calc(100% - 50px);height:24px;padding-top:12px;padding-left:15px;font-weight:500;font-size:17px;line-height:24px;letter-spacing:1px}.pixnet-happix-pilot__sticky-box__link--title,.pixnet-happix-pilot__sticky-box__link__img{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.pixnet-happix-pilot__sticky-box__link__img{justify-items:center;margin-right:3px;border-radius:50%;background-color:#f6f6f6}.pixnet-happix-pilot__sticky-box__title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pixnet-happix-pilot__sticky-box__img{width:66px!important;height:66px!important;margin:5px 15px 15px!important;border-radius:10px}.pixnet-happix-pilot__sticky-box__info--description{position:absolute;top:33px;width:calc(100% - 55px);font-size:13px!important;letter-spacing:1px;color:#5e5f6a!important;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pixnet-happix-pilot__sticky-box__link--description{margin-top:2px}.pixnet-happix-pilot__sticky-box__price{position:absolute;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;bottom:8px;left:75px}.pixnet-happix-pilot__sticky-box__price div{pointer-events:none}.pixnet-happix-pilot__sticky-box__price>div:nth-child(2){margin-right:12px;line-height:10px}.pixnet-happix-pilot__sticky-box__price>div>strike{font-size:10px!important;color:#5e5f6a!important}.pixnet-happix-pilot__sticky-box__price>div>span:first-child{font-size:16px!important;margin-right:5px;color:#f65f5e!important;font-weight:600}.pixnet-happix-pilot__sticky-box__price>div>span:nth-child(2){font-size:10px!important;color:#5e5f6a!important}.pixnet-happix-pilot__sticky-box__button{position:absolute;right:10px;bottom:10px;padding:10px 25px;font-weight:500;font-size:15px;letter-spacing:1px;color:#fff;background-color:#00aef0;border-radius:6px}.pixnet-happix-pilot__sticky-box__close{position:absolute;top:0;right:0;width:36px;height:36px;padding-top:4px;color:transparent}.pixnet-happix-pilot__sticky-box__close img{pointer-events:none}.pixnet-happix-pilot__sticky-box__info{padding-left:30px;font-size:17px;line-height:2;color:#f04e2f;background:transparent 5px no-repeat}.pixnet-happix-pilot__sticky-box__link--button{position:absolute;right:30px;bottom:15px;width:120px;height:36px;font-size:13px;color:#fff;background-color:#f04e2f;border-radius:6px;cursor:pointer}.pixnet-happix-pilot__sticky-box__btn{display:inline-block;width:120px;height:36px;font-weight:500;font-size:15px;line-height:36px;letter-spacing:1px;text-align:center}.pixnet-happix-pilot__sticky-box__info--date,.pixnet-happix-pilot__sticky-box__info--people,.pixnet-happix-pilot__sticky-box__link--description,.pixnet-happix-pilot__sticky-box__link--price,.pixnet-happix-pilot__sticky-box__link--title{color:inherit}.pixnet-happix-pilot__sticky-box__btn--red{background-color:#f04e2f}.pixnet-happix-pilot__sticky-box__btn--blue{background-color:#00aef0}}');var un=function(e){function n(e,i){var o;return t(this,n),(o=we(this,Be(n).call(this,e))).isSendCTAViewEvent=!1,o.giftNotification=i||{},o.giftNotificationContent=o.giftNotification.widget_content||{},o.ga=o.giftNotificationContent.ga||"",o.id=o.giftNotification.project_id,o.handleNavigate=o.handleNavigate.bind(ke(ke(o))),o.bindCTAClickEvent=o.bindCTAClickEvent.bind(ke(ke(o))),o.openNewWindow=o.openNewWindow.bind(ke(ke(o))),o}return je(n,Le),S(n,[{key:"getTemplate",value:function(){var t=this.getCssPrefix(),e=this.giftNotificationContent.img_link||"",n=this.giftNotificationContent.title||"",i=this.giftNotificationContent.description||"",o=this.giftNotificationContent.button_name||"",a=this.giftNotificationContent.link,r="",s="",p="";return e&&(r='<a class="'.concat(t,'__sticky-box__link--img" href="').concat(a,'" target="_blank" rel="nofollow noopener">\n                        <img src="').concat(ln(e,80,80),'" class="').concat(t,'__sticky-box__img" style="float:left;margin:10px;width:80px;height:80px;">\n                    </a>')),i&&(s='<a class="'.concat(t,'__sticky-box__link--description" href="').concat(a,'" target="_blank" rel="nofollow noopener">\n                        <span class="').concat(t,'__sticky-box__info--description" style="font-size:12px;color:#999;">').concat(i,"</span>\n                    </a>")),o&&(p='<a href="'.concat(a,'" class="').concat(t,'__sticky-box__button" target="_blank" rel="nofollow noopener">\n                ').concat(o,"\n            </a>")),'<div class="'.concat(t,"__sticky-box ").concat(t,'__sticky-box" data-title="').concat(n,'" data-img-link="').concat(e,'" data-description="').concat(i,'" data-link="').concat(a,'" data-button-name="').concat(o,'">\n            <a class="').concat(t,'__sticky-box__link--title" href="').concat(a,'" target="_blank" rel="nofollow noopener">\n                <div class="').concat(t,'__sticky-box__link__img"><img src="').concat($e,'/btn_gift_cta_y.svg" width="18" height="18"/></div>\n                <div class="').concat(t,'__sticky-box__title" style="height:auto;">').concat(n,"</div>\n            </a>\n            ").concat(r,"\n            ").concat(s,"\n            ").concat(this.getContentTemplate(),'\n            <div class="').concat(t,'__sticky-box__close">\n                <img src="https://s.pixfs.net/common/pixhappix-ui-module/images/btn_close.svg"/>\n            </div>\n            ').concat(p,"\n        </div>")}},{key:"getContentTemplate",value:function(){var t=this.getCssPrefix(),e=this.giftNotificationContent.html||"",n=this.giftNotificationContent.original_price||"",i=this.giftNotificationContent.price||"",o="";return i&&"0"!==i?(""!==n&&"0"!==n&&(o="<div></div><div><strike>".concat(n,"</strike></div>")),'\n                <a class="'.concat(t,'__sticky-box__price" href="').concat(this.giftNotificationContent.link,'" target="_blank" rel="nofollow noopener">\n                    ').concat(o,"\n                    <div>\n                        <span>").concat(i,"</span><span>起</span>\n                    </div>\n                </a>\n            ")):e?'\n                <a class="'.concat(t,'__sticky-box__price" href="').concat(this.giftNotificationContent.link,'" target="_blank" rel="nofollow noopener">\n                    ').concat(e,"\n                </a>\n            "):""}},{key:"getElements",value:function(){this.giftNotificationElement=tn.getElementByPostfix("sticky-box"),this.closeButtonElement=this.giftNotificationElement.getElementByPostfix("sticky-box__close")}},{key:"bindEvents",value:function(){this.giftNotificationElement.bindEvent("click",this.bindCTAClickEvent)}},{key:"bindCTAClickEvent",value:function(t){var e=t.target;if("pixnet-happix-pilot__sticky-box__close"===e.className)return this.containerElement.fireEvent("close"),this.giftNotificationElement.removeClass("show"),pn("CTA_Close"),void cn("".concat(this.giftNotification.click_link,"?position=close"));var n={title:["CTA_Click_Title","title"],price:["CTA_Click_Price","other"],btn:["CTA_Click_Button","button"],img:["CTA_Click_Image","image"],description:["CTA_Click_Description","description"],button:["CTA_Click_Button","button"]},i="CTA_Click_other",o="other";for(var a in n)if(0<=e.className.indexOf(a)){i=n[a][0],o=n[a][1];break}this.giftNotificationContent.link?(pn(i),cn("".concat(this.giftNotification.click_link,"?position=").concat(o)),"CTA_Click_other"===i&&(this.openNewWindow(this.giftNotificationContent.link),t.preventDefault())):t.preventDefault()}},{key:"handleNavigate",value:function(){var t=this.giftNotificationContent.link;t&&window.open(t+"?utm_medium=-new","_blank")}},{key:"openNewWindow",value:function(t){var e=document.createElement("a");e.href=t,e.target="_blank",e.rel="noopener",e.click()}},{key:"hide",value:function(){return this.giftNotificationElement.removeClass("show"),this}},{key:"show",value:function(){return this.giftNotificationElement.addClass("show"),this.isSendCTAViewEvent||(pn("CTA_View"),sn({category:"pilot-CTA",action:"giftView"}),cn("".concat(this.giftNotification.pv_link)),this.isSendCTAViewEvent=!0),this}},{key:"render",value:function(){return this.containerElement.setHTML(this.getTemplate()),this.getElements(),this.bindEvents(),this.giftNotification.pv_load_link&&cn("".concat(this.giftNotification.pv_load_link)),this}}]),n}(),fn={now:function(){return Date.now()},withinSpecificHours:function(t,e,n){return!(!t||!e)&&Math.ceil(Math.abs(t-e))<36e5*n},toCountDownTime:function(t){var e=Number(t)-this.now()/1e3,n=e>0?"剩下":"過期",i=Math.floor(e/60),o=Math.floor(i/1440),a=Math.floor((i-1440*o)/60);return n+o+"日"+a+"小時"+(i-1440*o-60*a)+"分"}},xn=function(t,e){t&&void 0!==e&&window.localStorage.setItem(t,e)},_n=function(t){return window.localStorage.getItem(t)};hn("@media screen and (max-width:768px){.pixnet-happix-pilot__happix-notification{position:fixed;right:10px;bottom:47px;left:10px;width:calc(100% - 20px);margin:auto;-webkit-transition:all .4s;transition:all .4s}.pixnet-happix-pilot__happix-notification.hidden{opacity:0;-webkit-transform:translateY(52px);transform:translateY(52px)}.pixnet-happix-pilot__happix-notification__wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:50px;background:rgba(0,0,0,.8);border-radius:20px;cursor:pointer}.pixnet-happix-pilot__happix-notification__icon-container{position:relative;width:58px;-ms-flex-item-align:end;align-self:flex-end}.pixnet-happix-pilot__happix-notification__icon-container>*{position:absolute;bottom:-12px;left:-9px;width:70px}.pixnet-happix-pilot__happix-notification__message{-webkit-box-flex:1;-ms-flex:1;flex:1;max-height:36px;color:#fff;font-family:PingFang TC;font-size:13px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:.9px;text-overflow:clip}.pixnet-happix-pilot__happix-notification__separator{height:25px;margin-left:11px;border-left:1px solid hsla(0,0%,100%,.2)}.pixnet-happix-pilot__happix-notification__close-button{width:20px;margin-right:15px;margin-left:15px;cursor:pointer}}@media screen and (min-width:769px){.pixnet-happix-pilot__happix-notification{position:fixed;right:0;bottom:48px;left:0;width:100%;margin:auto;-webkit-transition:all .4s;transition:all .4s}.pixnet-happix-pilot__happix-notification.hidden{opacity:0;-webkit-transform:translateY(52px);transform:translateY(52px)}.pixnet-happix-pilot__happix-notification__wrapper{position:absolute;right:0;bottom:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:300px;height:50px;background:rgba(0,0,0,.8);border-radius:20px;cursor:pointer}.pixnet-happix-pilot__happix-notification__icon-container{position:relative;width:58px;-ms-flex-item-align:end;align-self:flex-end}.pixnet-happix-pilot__happix-notification__icon-container>*{position:absolute;bottom:-12px;left:-9px;width:70px}.pixnet-happix-pilot__happix-notification__message{-webkit-box-flex:1;-ms-flex:1;flex:1;max-height:36px;color:#fff;font-family:PingFang TC;font-size:13px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:.9px;text-overflow:clip}.pixnet-happix-pilot__happix-notification__separator{height:25px;margin-left:11px;border-left:1px solid hsla(0,0%,100%,.2)}.pixnet-happix-pilot__happix-notification__close-button{width:20px;margin-right:15px;margin-left:15px;cursor:pointer}}");var dn=function(e){function n(e){return t(this,n),we(this,Be(n).call(this,e))}return je(n,Le),S(n,[{key:"getTemplates",value:function(){var t=this.getCssPrefix();return'\n            <div\n                class="'.concat(t,'__happix-notification hidden"\n                style="max-width: ').concat(Ue.getOptions().getPilotWidth(),'px"\n            >\n                <div class="').concat(t,'__happix-notification__wrapper">\n                    <div class="').concat(t,'__happix-notification__icon-container">\n                        <img \n                            src="').concat($e,'/btn-happix-ufo.png"\n                            srcset="').concat($e,"/btn-happix-ufo@2x.png 2x,\n                                ").concat($e,'/btn-happix-ufo@3x.png 3x" \n                        />\n                    </div>\n                    <div class="').concat(t,'__happix-notification__message"></div>\n                    <div class="').concat(t,'__happix-notification__separator"></div>\n                    <img\n                        class="').concat(t,'__happix-notification__close-button"\n                        src="').concat($e,'/btn_close_alpha_v2.svg"\n                    />\n                </div>\n            </div>\n        ')}},{key:"getElements",value:function(){this.happixNotificationElement=tn.getElementByPostfix("happix-notification"),this.closeButtonElement=this.happixNotificationElement.getElementByPostfix("happix-notification__close-button"),this.happixMessage=this.happixNotificationElement.getElementByPostfix("happix-notification__message")}},{key:"saveClickTime",value:function(){var t=fn.now();xn("pilot_bar_click_timestamp",t)}},{key:"bindEvents",value:function(){var t=this;this.closeButtonElement.bindEvent("click",function(e){t.containerElement.fireEvent("close"),e.stopPropagation()}),this.happixNotificationElement.bindEvent("click",function(){t.containerElement.fireEvent("click"),t.saveClickTime()})}},{key:"hide",value:function(){return this.happixNotificationElement.addClass("hidden"),this}},{key:"show",value:function(){return this.happixNotificationElement.removeClass("hidden"),this}},{key:"setMessage",value:function(t){this.happixMessage.setHTML(t)}},{key:"render",value:function(){return this.containerElement.setHTML(this.getTemplates()),this.getElements(),this.bindEvents(),this}}]),n}(),gn=Object.assign,mn=!gn||c(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=gn({},t)[n]||Object.keys(gn({},e)).join("")!=i})?function(t,e){for(var n=ut(t),i=arguments.length,o=1,a=jt.f,r=At.f;i>o;)for(var s,p=H(arguments[o++]),c=a?Q(p).concat(a(p)):Q(p),l=c.length,h=0;l>h;)r.call(p,s=c[h++])&&(n[s]=p[s]);return n}:gn;w(w.S+w.F,"Object",{assign:mn});var bn=o.Object.assign,vn=n(function(t,n){!function(){var i="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||this||{},o=i._,a=Array.prototype,r=Object.prototype,s="undefined"!=typeof Symbol?Symbol.prototype:null,p=a.push,c=a.slice,l=r.toString,h=r.hasOwnProperty,u=Array.isArray,f=Object.keys,x=Object.create,_=function(){},d=function(t){return t instanceof d?t:this instanceof d?void(this._wrapped=t):new d(t)};n.nodeType?i._=d:(!t.nodeType&&t.exports&&(n=t.exports=d),n._=d),d.VERSION="1.9.1";var g,m=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,o){return t.call(e,n,i,o)};case 4:return function(n,i,o,a){return t.call(e,n,i,o,a)}}return function(){return t.apply(e,arguments)}},b=function(t,e,n){return d.iteratee!==g?d.iteratee(t,e):null==t?d.identity:d.isFunction(t)?m(t,e,n):d.isObject(t)&&!d.isArray(t)?d.matcher(t):d.property(t)};d.iteratee=g=function(t,e){return b(t,e,1/0)};var v=function(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),i=Array(n),o=0;o<n;o++)i[o]=arguments[o+e];switch(e){case 0:return t.call(this,i);case 1:return t.call(this,arguments[0],i);case 2:return t.call(this,arguments[0],arguments[1],i)}var a=Array(e+1);for(o=0;o<e;o++)a[o]=arguments[o];return a[e]=i,t.apply(this,a)}},y=function(t){if(!d.isObject(t))return{};if(x)return x(t);_.prototype=t;var e=new _;return _.prototype=null,e},k=function(t){return function(e){return null==e?void 0:e[t]}},w=function(t,e){return null!=t&&h.call(t,e)},E=function(t,e){for(var n=e.length,i=0;i<n;i++){if(null==t)return;t=t[e[i]]}return n?t:void 0},C=Math.pow(2,53)-1,P=k("length"),T=function(t){var e=P(t);return"number"==typeof e&&e>=0&&e<=C};d.each=d.forEach=function(t,e,n){var i,o;if(e=m(e,n),T(t))for(i=0,o=t.length;i<o;i++)e(t[i],i,t);else{var a=d.keys(t);for(i=0,o=a.length;i<o;i++)e(t[a[i]],a[i],t)}return t},d.map=d.collect=function(t,e,n){e=b(e,n);for(var i=!T(t)&&d.keys(t),o=(i||t).length,a=Array(o),r=0;r<o;r++){var s=i?i[r]:r;a[r]=e(t[s],s,t)}return a};var S=function(t){return function(e,n,i,o){var a=arguments.length>=3;return function(e,n,i,o){var a=!T(e)&&d.keys(e),r=(a||e).length,s=t>0?0:r-1;for(o||(i=e[a?a[s]:s],s+=t);s>=0&&s<r;s+=t){var p=a?a[s]:s;i=n(i,e[p],p,e)}return i}(e,m(n,o,4),i,a)}};d.reduce=d.foldl=d.inject=S(1),d.reduceRight=d.foldr=S(-1),d.find=d.detect=function(t,e,n){var i=(T(t)?d.findIndex:d.findKey)(t,e,n);if(void 0!==i&&-1!==i)return t[i]},d.filter=d.select=function(t,e,n){var i=[];return e=b(e,n),d.each(t,function(t,n,o){e(t,n,o)&&i.push(t)}),i},d.reject=function(t,e,n){return d.filter(t,d.negate(b(e)),n)},d.every=d.all=function(t,e,n){e=b(e,n);for(var i=!T(t)&&d.keys(t),o=(i||t).length,a=0;a<o;a++){var r=i?i[a]:a;if(!e(t[r],r,t))return!1}return!0},d.some=d.any=function(t,e,n){e=b(e,n);for(var i=!T(t)&&d.keys(t),o=(i||t).length,a=0;a<o;a++){var r=i?i[a]:a;if(e(t[r],r,t))return!0}return!1},d.contains=d.includes=d.include=function(t,e,n,i){return T(t)||(t=d.values(t)),("number"!=typeof n||i)&&(n=0),d.indexOf(t,e,n)>=0},d.invoke=v(function(t,e,n){var i,o;return d.isFunction(e)?o=e:d.isArray(e)&&(i=e.slice(0,-1),e=e[e.length-1]),d.map(t,function(t){var a=o;if(!a){if(i&&i.length&&(t=E(t,i)),null==t)return;a=t[e]}return null==a?a:a.apply(t,n)})}),d.pluck=function(t,e){return d.map(t,d.property(e))},d.where=function(t,e){return d.filter(t,d.matcher(e))},d.findWhere=function(t,e){return d.find(t,d.matcher(e))},d.max=function(t,e,n){var i,o,a=-1/0,r=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var s=0,p=(t=T(t)?t:d.values(t)).length;s<p;s++)null!=(i=t[s])&&i>a&&(a=i);else e=b(e,n),d.each(t,function(t,n,i){((o=e(t,n,i))>r||o===-1/0&&a===-1/0)&&(a=t,r=o)});return a},d.min=function(t,e,n){var i,o,a=1/0,r=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var s=0,p=(t=T(t)?t:d.values(t)).length;s<p;s++)null!=(i=t[s])&&i<a&&(a=i);else e=b(e,n),d.each(t,function(t,n,i){((o=e(t,n,i))<r||o===1/0&&a===1/0)&&(a=t,r=o)});return a},d.shuffle=function(t){return d.sample(t,1/0)},d.sample=function(t,e,n){if(null==e||n)return T(t)||(t=d.values(t)),t[d.random(t.length-1)];var i=T(t)?d.clone(t):d.values(t),o=P(i);e=Math.max(Math.min(e,o),0);for(var a=o-1,r=0;r<e;r++){var s=d.random(r,a),p=i[r];i[r]=i[s],i[s]=p}return i.slice(0,e)},d.sortBy=function(t,e,n){var i=0;return e=b(e,n),d.pluck(d.map(t,function(t,n,o){return{value:t,index:i++,criteria:e(t,n,o)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index}),"value")};var B=function(t,e){return function(n,i,o){var a=e?[[],[]]:{};return i=b(i,o),d.each(n,function(e,o){var r=i(e,o,n);t(a,e,r)}),a}};d.groupBy=B(function(t,e,n){w(t,n)?t[n].push(e):t[n]=[e]}),d.indexBy=B(function(t,e,n){t[n]=e}),d.countBy=B(function(t,e,n){w(t,n)?t[n]++:t[n]=1});var O=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;d.toArray=function(t){return t?d.isArray(t)?c.call(t):d.isString(t)?t.match(O):T(t)?d.map(t,d.identity):d.values(t):[]},d.size=function(t){return null==t?0:T(t)?t.length:d.keys(t).length},d.partition=B(function(t,e,n){t[n?0:1].push(e)},!0),d.first=d.head=d.take=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[0]:d.initial(t,t.length-e)},d.initial=function(t,e,n){return c.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},d.last=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[t.length-1]:d.rest(t,Math.max(0,t.length-e))},d.rest=d.tail=d.drop=function(t,e,n){return c.call(t,null==e||n?1:e)},d.compact=function(t){return d.filter(t,Boolean)};var M=function(t,e,n,i){for(var o=(i=i||[]).length,a=0,r=P(t);a<r;a++){var s=t[a];if(T(s)&&(d.isArray(s)||d.isArguments(s)))if(e)for(var p=0,c=s.length;p<c;)i[o++]=s[p++];else M(s,e,n,i),o=i.length;else n||(i[o++]=s)}return i};d.flatten=function(t,e){return M(t,e,!1)},d.without=v(function(t,e){return d.difference(t,e)}),d.uniq=d.unique=function(t,e,n,i){d.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=b(n,i));for(var o=[],a=[],r=0,s=P(t);r<s;r++){var p=t[r],c=n?n(p,r,t):p;e&&!n?(r&&a===c||o.push(p),a=c):n?d.contains(a,c)||(a.push(c),o.push(p)):d.contains(o,p)||o.push(p)}return o},d.union=v(function(t){return d.uniq(M(t,!0,!0))}),d.intersection=function(t){for(var e=[],n=arguments.length,i=0,o=P(t);i<o;i++){var a=t[i];if(!d.contains(e,a)){var r;for(r=1;r<n&&d.contains(arguments[r],a);r++);r===n&&e.push(a)}}return e},d.difference=v(function(t,e){return e=M(e,!0,!0),d.filter(t,function(t){return!d.contains(e,t)})}),d.unzip=function(t){for(var e=t&&d.max(t,P).length||0,n=Array(e),i=0;i<e;i++)n[i]=d.pluck(t,i);return n},d.zip=v(d.unzip),d.object=function(t,e){for(var n={},i=0,o=P(t);i<o;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n};var N=function(t){return function(e,n,i){n=b(n,i);for(var o=P(e),a=t>0?0:o-1;a>=0&&a<o;a+=t)if(n(e[a],a,e))return a;return-1}};d.findIndex=N(1),d.findLastIndex=N(-1),d.sortedIndex=function(t,e,n,i){for(var o=(n=b(n,i,1))(e),a=0,r=P(t);a<r;){var s=Math.floor((a+r)/2);n(t[s])<o?a=s+1:r=s}return a};var j=function(t,e,n){return function(i,o,a){var r=0,s=P(i);if("number"==typeof a)t>0?r=a>=0?a:Math.max(a+s,r):s=a>=0?Math.min(a+1,s):a+s+1;else if(n&&a&&s)return i[a=n(i,o)]===o?a:-1;if(o!=o)return(a=e(c.call(i,r,s),d.isNaN))>=0?a+r:-1;for(a=t>0?r:s-1;a>=0&&a<s;a+=t)if(i[a]===o)return a;return-1}};d.indexOf=j(1,d.findIndex,d.sortedIndex),d.lastIndexOf=j(-1,d.findLastIndex),d.range=function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var i=Math.max(Math.ceil((e-t)/n),0),o=Array(i),a=0;a<i;a++,t+=n)o[a]=t;return o},d.chunk=function(t,e){if(null==e||e<1)return[];for(var n=[],i=0,o=t.length;i<o;)n.push(c.call(t,i,i+=e));return n};var A=function(t,e,n,i,o){if(!(i instanceof e))return t.apply(n,o);var a=y(t.prototype),r=t.apply(a,o);return d.isObject(r)?r:a};d.bind=v(function(t,e,n){if(!d.isFunction(t))throw new TypeError("Bind must be called on a function");var i=v(function(o){return A(t,i,e,this,n.concat(o))});return i}),d.partial=v(function(t,e){var n=d.partial.placeholder,i=function(){for(var o=0,a=e.length,r=Array(a),s=0;s<a;s++)r[s]=e[s]===n?arguments[o++]:e[s];for(;o<arguments.length;)r.push(arguments[o++]);return A(t,i,this,this,r)};return i}),d.partial.placeholder=d,d.bindAll=v(function(t,e){var n=(e=M(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=e[n];t[i]=d.bind(t[i],t)}}),d.memoize=function(t,e){var n=function(i){var o=n.cache,a=""+(e?e.apply(this,arguments):i);return w(o,a)||(o[a]=t.apply(this,arguments)),o[a]};return n.cache={},n},d.delay=v(function(t,e,n){return setTimeout(function(){return t.apply(null,n)},e)}),d.defer=d.partial(d.delay,d,1),d.throttle=function(t,e,n){var i,o,a,r,s=0;n||(n={});var p=function(){s=!1===n.leading?0:d.now(),i=null,r=t.apply(o,a),i||(o=a=null)},c=function(){var c=d.now();s||!1!==n.leading||(s=c);var l=e-(c-s);return o=this,a=arguments,l<=0||l>e?(i&&(clearTimeout(i),i=null),s=c,r=t.apply(o,a),i||(o=a=null)):i||!1===n.trailing||(i=setTimeout(p,l)),r};return c.cancel=function(){clearTimeout(i),s=0,i=o=a=null},c},d.debounce=function(t,e,n){var i,o,a=function(e,n){i=null,n&&(o=t.apply(e,n))},r=v(function(r){if(i&&clearTimeout(i),n){var s=!i;i=setTimeout(a,e),s&&(o=t.apply(this,r))}else i=d.delay(a,e,this,r);return o});return r.cancel=function(){clearTimeout(i),i=null},r},d.wrap=function(t,e){return d.partial(e,t)},d.negate=function(t){return function(){return!t.apply(this,arguments)}},d.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},d.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},d.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},d.once=d.partial(d.before,2),d.restArguments=v;var L=!{toString:null}.propertyIsEnumerable("toString"),z=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],H=function(t,e){var n=z.length,i=t.constructor,o=d.isFunction(i)&&i.prototype||r,a="constructor";for(w(t,a)&&!d.contains(e,a)&&e.push(a);n--;)(a=z[n])in t&&t[a]!==o[a]&&!d.contains(e,a)&&e.push(a)};d.keys=function(t){if(!d.isObject(t))return[];if(f)return f(t);var e=[];for(var n in t)w(t,n)&&e.push(n);return L&&H(t,e),e},d.allKeys=function(t){if(!d.isObject(t))return[];var e=[];for(var n in t)e.push(n);return L&&H(t,e),e},d.values=function(t){for(var e=d.keys(t),n=e.length,i=Array(n),o=0;o<n;o++)i[o]=t[e[o]];return i},d.mapObject=function(t,e,n){e=b(e,n);for(var i=d.keys(t),o=i.length,a={},r=0;r<o;r++){var s=i[r];a[s]=e(t[s],s,t)}return a},d.pairs=function(t){for(var e=d.keys(t),n=e.length,i=Array(n),o=0;o<n;o++)i[o]=[e[o],t[e[o]]];return i},d.invert=function(t){for(var e={},n=d.keys(t),i=0,o=n.length;i<o;i++)e[t[n[i]]]=n[i];return e},d.functions=d.methods=function(t){var e=[];for(var n in t)d.isFunction(t[n])&&e.push(n);return e.sort()};var F=function(t,e){return function(n){var i=arguments.length;if(e&&(n=Object(n)),i<2||null==n)return n;for(var o=1;o<i;o++)for(var a=arguments[o],r=t(a),s=r.length,p=0;p<s;p++){var c=r[p];e&&void 0!==n[c]||(n[c]=a[c])}return n}};d.extend=F(d.allKeys),d.extendOwn=d.assign=F(d.keys),d.findKey=function(t,e,n){e=b(e,n);for(var i,o=d.keys(t),a=0,r=o.length;a<r;a++)if(e(t[i=o[a]],i,t))return i};var I,D,R=function(t,e,n){return e in n};d.pick=v(function(t,e){var n={},i=e[0];if(null==t)return n;d.isFunction(i)?(e.length>1&&(i=m(i,e[1])),e=d.allKeys(t)):(i=R,e=M(e,!1,!1),t=Object(t));for(var o=0,a=e.length;o<a;o++){var r=e[o],s=t[r];i(s,r,t)&&(n[r]=s)}return n}),d.omit=v(function(t,e){var n,i=e[0];return d.isFunction(i)?(i=d.negate(i),e.length>1&&(n=e[1])):(e=d.map(M(e,!1,!1),String),i=function(t,n){return!d.contains(e,n)}),d.pick(t,i,n)}),d.defaults=F(d.allKeys,!0),d.create=function(t,e){var n=y(t);return e&&d.extendOwn(n,e),n},d.clone=function(t){return d.isObject(t)?d.isArray(t)?t.slice():d.extend({},t):t},d.tap=function(t,e){return e(t),t},d.isMatch=function(t,e){var n=d.keys(e),i=n.length;if(null==t)return!i;for(var o=Object(t),a=0;a<i;a++){var r=n[a];if(e[r]!==o[r]||!(r in o))return!1}return!0},I=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var o=typeof t;return("function"===o||"object"===o||"object"==typeof e)&&D(t,e,n,i)},D=function(t,e,n,i){t instanceof d&&(t=t._wrapped),e instanceof d&&(e=e._wrapped);var o=l.call(t);if(o!==l.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return s.valueOf.call(t)===s.valueOf.call(e)}var a="[object Array]"===o;if(!a){if("object"!=typeof t||"object"!=typeof e)return!1;var r=t.constructor,p=e.constructor;if(r!==p&&!(d.isFunction(r)&&r instanceof r&&d.isFunction(p)&&p instanceof p)&&"constructor"in t&&"constructor"in e)return!1}i=i||[];for(var c=(n=n||[]).length;c--;)if(n[c]===t)return i[c]===e;if(n.push(t),i.push(e),a){if((c=t.length)!==e.length)return!1;for(;c--;)if(!I(t[c],e[c],n,i))return!1}else{var h,u=d.keys(t);if(c=u.length,d.keys(e).length!==c)return!1;for(;c--;)if(h=u[c],!w(e,h)||!I(t[h],e[h],n,i))return!1}return n.pop(),i.pop(),!0},d.isEqual=function(t,e){return I(t,e)},d.isEmpty=function(t){return null==t||(T(t)&&(d.isArray(t)||d.isString(t)||d.isArguments(t))?0===t.length:0===d.keys(t).length)},d.isElement=function(t){return!(!t||1!==t.nodeType)},d.isArray=u||function(t){return"[object Array]"===l.call(t)},d.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},d.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(t){d["is"+t]=function(e){return l.call(e)==="[object "+t+"]"}}),d.isArguments(arguments)||(d.isArguments=function(t){return w(t,"callee")});var G=i.document&&i.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof G&&(d.isFunction=function(t){return"function"==typeof t||!1}),d.isFinite=function(t){return!d.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},d.isNaN=function(t){return d.isNumber(t)&&isNaN(t)},d.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===l.call(t)},d.isNull=function(t){return null===t},d.isUndefined=function(t){return void 0===t},d.has=function(t,e){if(!d.isArray(e))return w(t,e);for(var n=e.length,i=0;i<n;i++){var o=e[i];if(null==t||!h.call(t,o))return!1;t=t[o]}return!!n},d.noConflict=function(){return i._=o,this},d.identity=function(t){return t},d.constant=function(t){return function(){return t}},d.noop=function(){},d.property=function(t){return d.isArray(t)?function(e){return E(e,t)}:k(t)},d.propertyOf=function(t){return null==t?function(){}:function(e){return d.isArray(e)?E(t,e):t[e]}},d.matcher=d.matches=function(t){return t=d.extendOwn({},t),function(e){return d.isMatch(e,t)}},d.times=function(t,e,n){var i=Array(Math.max(0,t));e=m(e,n,1);for(var o=0;o<t;o++)i[o]=e(o);return i},d.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},d.now=Date.now||function(){return(new Date).getTime()};var W={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Y=d.invert(W),q=function(t){var e=function(e){return t[e]},n="(?:"+d.keys(t).join("|")+")",i=RegExp(n),o=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(o,e):t}};d.escape=q(W),d.unescape=q(Y),d.result=function(t,e,n){d.isArray(e)||(e=[e]);var i=e.length;if(!i)return d.isFunction(n)?n.call(t):n;for(var o=0;o<i;o++){var a=null==t?void 0:t[e[o]];void 0===a&&(a=n,o=i),t=d.isFunction(a)?a.call(t):a}return t};var U=0;d.uniqueId=function(t){var e=++U+"";return t?t+e:e},d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var $=/(.)^/,V={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},K=/\\|'|\r|\n|\u2028|\u2029/g,X=function(t){return"\\"+V[t]};d.template=function(t,e,n){!e&&n&&(e=n),e=d.defaults({},e,d.templateSettings);var i,o=RegExp([(e.escape||$).source,(e.interpolate||$).source,(e.evaluate||$).source].join("|")+"|$","g"),a=0,r="__p+='";t.replace(o,function(e,n,i,o,s){return r+=t.slice(a,s).replace(K,X),a=s+e.length,n?r+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?r+="'+\n((__t=("+i+"))==null?'':__t)+\n'":o&&(r+="';\n"+o+"\n__p+='"),e}),r+="';\n",e.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{i=new Function(e.variable||"obj","_",r)}catch(t){throw t.source=r,t}var s=function(t){return i.call(this,t,d)},p=e.variable||"obj";return s.source="function("+p+"){\n"+r+"}",s},d.chain=function(t){var e=d(t);return e._chain=!0,e};var J=function(t,e){return t._chain?d(e).chain():e};d.mixin=function(t){return d.each(d.functions(t),function(e){var n=d[e]=t[e];d.prototype[e]=function(){var t=[this._wrapped];return p.apply(t,arguments),J(this,n.apply(d,t))}}),d},d.mixin(d),d.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=a[t];d.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],J(this,n)}}),d.each(["concat","join","slice"],function(t){var e=a[t];d.prototype[t]=function(){return J(this,e.apply(this._wrapped,arguments))}}),d.prototype.value=function(){return this._wrapped},d.prototype.valueOf=d.prototype.toJSON=d.prototype.value,d.prototype.toString=function(){return String(this._wrapped)}}()});vn._;hn('@media screen and (max-width:768px){.pixnet-happix-pilot__coupon-card__wrapper{width:100%;border-radius:20px;background-color:#f6f6f6;overflow:hidden}.pixnet-happix-pilot__coupon-card__content-container{padding:15px;padding-bottom:0}.pixnet-happix-pilot__coupon-card__cover{width:100%}.pixnet-happix-pilot__coupon-card__tag{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;height:22px;transform:translateY(-2px);-webkit-transform:translateY(-2px);-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 5px;background-color:#ff7674;border-radius:6px;font-family:PingFang TC;font-size:12px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;vertical-align:middle}.pixnet-happix-pilot__coupon-card__tag:before{display:inline-block;width:18px;height:18px;content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_coupon.svg)}.pixnet-happix-pilot__coupon-card__title{font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:1.71;letter-spacing:1px;text-align:justify;color:#000}.pixnet-happix-pilot__coupon-card__description{margin-top:12px;margin-bottom:15px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:PingFang TC;font-size:13px;font-weight:400;font-style:normal;font-stretch:normal;line-height:1.69;letter-spacing:1px;color:#4a4a4a}.pixnet-happix-pilot__coupon-card__btn-link{height:40px;border-top:1px solid #e9e9e9;text-align:center}.pixnet-happix-pilot__coupon-card__btn-link a{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#4a90e2;text-decoration:none;line-height:40px}.pixnet-happix-pilot__coupon-card__btn-link a:after{display:block;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_arrow_blue.svg);content:"";height:16px;width:16px;margin-left:3px}.pixnet-happix-pilot__coupon-card__runs-out{min-height:40px;border-top:2px solid #e9e9e9;text-align:center}.pixnet-happix-pilot__coupon-card__runs-out a{display:block;padding:10px 0;color:#a8a9b2;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;letter-spacing:1px;text-decoration:none;line-height:1.83;pointer-events:none;cursor:not-allowed}}@media screen and (min-width:769px){.pixnet-happix-pilot__coupon-card__wrapper{width:100%;border-radius:20px;background-color:#f6f6f6;overflow:hidden}.pixnet-happix-pilot__coupon-card__content-container{padding:15px;padding-bottom:0}.pixnet-happix-pilot__coupon-card__cover{width:100%}.pixnet-happix-pilot__coupon-card__tag{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;height:22px;transform:translateY(-2px);-webkit-transform:translateY(-2px);-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 5px;background-color:#ff7674;border-radius:6px;font-family:PingFang TC;font-size:12px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;vertical-align:middle}.pixnet-happix-pilot__coupon-card__tag:before{display:inline-block;width:18px;height:18px;content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_coupon.svg)}.pixnet-happix-pilot__coupon-card__title{font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:1.71;letter-spacing:1px;text-align:justify;color:#000}.pixnet-happix-pilot__coupon-card__description{margin-top:12px;margin-bottom:15px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:PingFang TC;font-size:13px;font-weight:400;font-style:normal;font-stretch:normal;line-height:1.69;letter-spacing:1px;color:#4a4a4a}.pixnet-happix-pilot__coupon-card__btn-link{height:40px;border-top:1px solid #e9e9e9;text-align:center}.pixnet-happix-pilot__coupon-card__btn-link a{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#4a90e2;text-decoration:none;line-height:40px}.pixnet-happix-pilot__coupon-card__btn-link a:after{display:block;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_arrow_blue.svg);content:"";height:16px;width:16px;margin-left:3px}.pixnet-happix-pilot__coupon-card__runs-out{min-height:40px;border-top:2px solid #e9e9e9;text-align:center}.pixnet-happix-pilot__coupon-card__runs-out a{display:block;padding:10px 0;color:#a8a9b2;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;letter-spacing:1px;text-decoration:none;line-height:1.83;pointer-events:none;cursor:not-allowed}}');var yn=function(e){function n(e,i){return t(this,n),we(this,Be(n).call(this,e,i))}return je(n,Le),S(n,[{key:"_getImageHtml",value:function(){var t=this.getCssPrefix();return this.props.cover?'<img class="'.concat(t,'__coupon-card__cover" src="').concat(this.props.cover,'">'):""}},{key:"_getLinkText",value:function(){switch(this.props.state){case"ACCEPTED":return"已領取 <div>可到 email 查看優惠</div>";case"PENDING":return"免費領取";case"UNAVAILABLE":return"已領完";default:return""}}},{key:"_getLinkTextStyle",value:function(){var t=this.getCssPrefix(),e=this.props.state;return"".concat(t,"PENDING"===e?"__coupon-card__btn-link":"__coupon-card__runs-out")}},{key:"getTemplate",value:function(){var t=this.getCssPrefix();return'\n            <div class="'.concat(t,"__coupon-card__").concat(this.props.id,'">\n                <div class="').concat(t,'__coupon-card__wrapper">\n                    ').concat(this._getImageHtml(),'\n                    <div class="').concat(t,'__coupon-card__content-container">\n                        <div>\n                            <span class="').concat(t,'__coupon-card__tag">').concat(this.props.tag,'</span>\n                            <span class="').concat(t,'__coupon-card__title">').concat(this.props.title,'</span>\n                        </div>\n                        <div class="').concat(t,'__coupon-card__description">').concat(this.props.description,'</div>\n                        <div class="').concat(this._getLinkTextStyle(),'">\n                            <a  \n                                href="').concat(this.props.link,'" target="_blank">\n                                ').concat(this._getLinkText(),"\n                            </a>    \n                        </div>\n                    </div>\n                </div>\n            </div>\n        ")}},{key:"bindEvents",value:function(){var t=this;this.buttonLink.bindEvent("click",vn.debounce(function(){sn({category:"pilot-happixPopup",action:"positionClick",label:t.props.msg_pos})},100))}},{key:"getElements",value:function(){var t=this.getCssPrefix();this.couponCardElement=tn.getElementByPostfix("coupon-card__".concat(this.props.id)),this.buttonLink=tn.wrapper(document.querySelector(".".concat(t,"__coupon-card__btn-link > a")))}},{key:"render",value:function(){return this.containerElement.appendChild(tn.createElement(this.getTemplate())),this.getElements(),this.bindEvents(),this}}]),n}();hn('.pixnet-happix-pilot__happix-card{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.pixnet-happix-pilot__happix-card__avatar{width:36px}.pixnet-happix-pilot__happix-card__conversation{width:10px}.pixnet-happix-pilot__happix-card__content{-webkit-box-flex:1;-ms-flex:1;flex:1;padding:15px;padding-bottom:0;color:#000;background:#f6f6f6;border-radius:20px;border-top-left-radius:0}.pixnet-happix-pilot__happix-card__content__message{padding-bottom:15px}.pixnet-happix-pilot__happix-card__content__link,.pixnet-happix-pilot__happix-card__content__message{font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px}.pixnet-happix-pilot__happix-card__content__link{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:10px 0;border-top:1px solid #e9e9e9;color:#4a90e2;text-align:center;text-decoration:none;cursor:pointer}.pixnet-happix-pilot__happix-card__content__link:hover{color:#4a90e2}.pixnet-happix-pilot__happix-card__content__link.hidden{display:none}.pixnet-happix-pilot__happix-card__content__link:after{display:block;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_arrow_blue.svg);content:"";height:16px;width:16px;margin-left:3px}');var kn=function(e){function n(e,i){return t(this,n),we(this,Be(n).call(this,e,i))}return je(n,Le),S(n,[{key:"getTemplate",value:function(){var t=this.getCssPrefix(),e=this.props.name?"".concat(this.props.name,"～我是你的領航員Happix，很高興看到你！"):"我是領航員Happix，很高興看到你！600萬人正在挑戰任務拿好康，快跟上！",n=this.props.name?"hidden":"";return'\n            <div class="'.concat(t,'__happix-card">\n                <img\n                    class="').concat(t,'__happix-card__avatar"\n                    src="').concat($e,'/happix_head.svg"\n                />\n                <img\n                    class="').concat(t,'__happix-card__conversation"\n                    src="').concat($e,'/conversation_gray.svg"\n                />\n                <div class="').concat(t,'__happix-card__content">\n                    <div class="').concat(t,'__happix-card__content__message">').concat(e,'</div>\n                    <a\n                        class="').concat(t,"__happix-card__content__link ").concat(n,'"\n                        href="').concat(Ue.getOptions().getLoginURL(),'"\n                    >\n                        立即登入\n                    </a>\n                </div>\n            </img>\n        ')}},{key:"getElements",value:function(){this.happixCardElement=tn.getElementByPostfix("happix-card"),this.contentLinkElement=this.happixCardElement.getElementByPostfix("happix-card__content__link")}},{key:"bindEvents",value:function(){var t=this;this.contentLinkElement.bindEvent("click",function(){sn({category:"pilot-happixPopup",action:"login"}),sn({category:"pilot-happixPopup",action:"positionClick",label:t.props.msg_pos})})}},{key:"render",value:function(){return this.containerElement.setHTML(this.getTemplate()),this.getElements(),this.bindEvents(),this}}]),n}();hn(".pixnet-happix-pilot__message-card{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.pixnet-happix-pilot__message-card__avatar{width:36px}.pixnet-happix-pilot__message-card__conversation{width:10px}.pixnet-happix-pilot__message-card__content{-webkit-box-flex:1;-ms-flex:1;flex:1;padding:15px;background:#f6f6f6;border-radius:20px;border-top-left-radius:0;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px}");var wn=function(e){function n(e,i){return t(this,n),we(this,Be(n).call(this,e,i))}return je(n,Le),S(n,[{key:"getTemplate",value:function(){var t=this.getCssPrefix();return'\n            <div class="'.concat(t,'__message-card">\n                <img\n                    class="').concat(t,'__message-card__avatar"\n                    src="').concat($e,'/happix_head.svg"\n                />\n                <img\n                    class="').concat(t,'__message-card__conversation"\n                    src="').concat($e,'/conversation_gray.svg"\n                />\n                <div class="').concat(t,'__message-card__content">').concat(this.props.message,"</div>\n            </img>\n        ")}},{key:"getElements",value:function(){this.messageCardElement=tn.getElementByPostfix("message-card")}},{key:"render",value:function(){return this.containerElement.appendChild(tn.createElement(this.getTemplate())),this.getElements(),this}}]),n}(),En=function(){var t=Number(Ae.$mobile_screen_max_width.replace("px",""));return window.innerWidth<=t};hn('@media screen and (max-width:768px){.pixnet-happix-pilot__task-card__wrapper{display:block;overflow:hidden;background-color:#f6f6f6;border-radius:20px}.pixnet-happix-pilot__task-card__content-container{padding:15px;padding-bottom:0}.pixnet-happix-pilot__task-card__cover{display:block;width:100%}.pixnet-happix-pilot__task-card__cover-container{position:relative}.pixnet-happix-pilot__task-card__countdown{position:absolute;bottom:0;width:100%;padding:2px 15px;font-size:11px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;background-color:rgba(0,0,0,.5)}.pixnet-happix-pilot__task-card__countdown:before{content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_time.svg);display:inline-block;width:14px;height:14px;margin-right:5px;vertical-align:middle;-o-object-fit:contain;object-fit:contain;-webkit-transform:translateY(-10%);transform:translateY(-10%)}.pixnet-happix-pilot__task-card__tag{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:22px;padding:0 5px;vertical-align:middle;font-family:PingFang TC;font-size:12px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;-webkit-transform:translateY(-2px);transform:translateY(-2px);background-color:#66b3d9;border-radius:6px}.pixnet-happix-pilot__task-card__tag:before{content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_task.svg);display:inline-block;width:18px;height:18px}.pixnet-happix-pilot__task-card__title{font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:1.71;letter-spacing:1px;text-align:justify;color:#000}.pixnet-happix-pilot__task-card__description{overflow:hidden;max-height:61px;height:auto;margin-top:12px;margin-bottom:15px;font-family:PingFang TC;font-size:13px;font-weight:400;font-style:normal;font-stretch:normal;line-height:1.69;letter-spacing:1px;color:#4a4a4a;text-overflow:ellipsis;-o-text-overflow:ellipsis;-ms-text-overflow:ellipsis;-moz-text-overflow:ellipsis;word-wrap:break-word}.pixnet-happix-pilot__task-card__btn-link{height:40px;border-top:1px solid #e9e9e9;text-align:center}.pixnet-happix-pilot__task-card__btn-link span{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#4a90e2;line-height:40px}.pixnet-happix-pilot__task-card__btn-link span:after{content:"";display:block;height:16px;width:16px;margin-left:3px;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_arrow_blue.svg)}}@media screen and (min-width:769px){.pixnet-happix-pilot__task-card__wrapper{display:block;overflow:hidden;background-color:#f6f6f6;border-radius:20px}.pixnet-happix-pilot__task-card__content-container{padding:15px;padding-bottom:0}.pixnet-happix-pilot__task-card__cover{display:block;width:100%}.pixnet-happix-pilot__task-card__tag{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:22px;padding:0 5px;vertical-align:middle;font-family:PingFang TC;font-size:12px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;background-color:#66b3d9;border-radius:6px;-webkit-transform:translateY(-2px);transform:translateY(-2px)}.pixnet-happix-pilot__task-card__tag:before{content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_task.svg);display:inline-block;width:18px;height:18px}.pixnet-happix-pilot__task-card__cover-container{position:relative}.pixnet-happix-pilot__task-card__countdown{position:absolute;width:100%;padding:2px 15px;bottom:0;font-size:11px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;background-color:rgba(0,0,0,.5)}.pixnet-happix-pilot__task-card__countdown:before{content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_time.svg);display:inline-block;width:14px;height:14px;margin-right:5px;vertical-align:middle;-o-object-fit:contain;object-fit:contain;-webkit-transform:translateY(-10%);transform:translateY(-10%)}.pixnet-happix-pilot__task-card__title{font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:1.71;letter-spacing:1px;color:#000;text-align:justify}.pixnet-happix-pilot__task-card__description{overflow:hidden;height:auto;max-height:61px;margin-top:12px;margin-bottom:15px;font-family:PingFang TC;font-size:13px;font-weight:400;font-style:normal;font-stretch:normal;line-height:1.69;letter-spacing:1px;color:#4a4a4a;text-overflow:ellipsis;-o-text-overflow:ellipsis;-ms-text-overflow:ellipsis;-moz-text-overflow:ellipsis;word-wrap:break-word}.pixnet-happix-pilot__task-card__btn-link{height:40px;border-top:1px solid #e9e9e9;text-align:center}.pixnet-happix-pilot__task-card__btn-link span{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#4a90e2;line-height:40px}.pixnet-happix-pilot__task-card__btn-link span:after{content:"";display:block;height:16px;width:16px;margin-left:3px;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_arrow_blue.svg)}}');var Cn=function(e){function n(e,i){return t(this,n),we(this,Be(n).call(this,e,i))}return je(n,Le),S(n,[{key:"_getImageHtml",value:function(){var t=this.getCssPrefix(),e=En();return this.props.cover?'\n            <img class="'.concat(t,'__task-card__cover"\n                src="').concat(e?this.props.cover:ln(this.props.cover,254,127),'"\n            >\n        '):""}},{key:"_getCountDownHtml",value:function(){if(!this.props.cover)return"";var t=this.getCssPrefix();return'<div class="'.concat(t,'__task-card__countdown">\n                    ').concat(fn.toCountDownTime(this.props.end_time),"\n                </div>")}},{key:"getTemplate",value:function(){var t=this.getCssPrefix();return'\n            <a class="'.concat(t,"__task-card__wrapper ").concat(t,"__task-card__").concat(this.props.id,'"\n                href="').concat(this.props.link,'" target="_blank">\n                <div class="').concat(t,'__task-card__cover-container">\n                    ').concat(this._getImageHtml(),"\n                    ").concat(this._getCountDownHtml(),'\n                </div>\n                <div class="').concat(t,'__task-card__content-container">\n                    <div>\n                        <span class="').concat(t,'__task-card__tag">').concat(this.props.tag,'</span>\n                        <span class="').concat(t,'__task-card__title">').concat(this.props.title,'</span>\n                    </div>\n                    <div class="').concat(t,'__task-card__description">').concat(this.props.description,'</div>\n                    <div class="').concat(t,'__task-card__btn-link">\n                        <span>參加任務</span>\n                    </div>\n                </div>\n            </a>\n        ')}},{key:"bindEvents",value:function(){var t=this;this.taskCardElement.bindEvent("click",vn.debounce(function(){sn({category:"pilot-happixPopup",action:"positionClick",label:String(t.props.msg_pos),id:t.props.id})},100))}},{key:"getElements",value:function(){this.taskCardElement=tn.getElementByPostfix("task-card__".concat(this.props.id))}},{key:"render",value:function(){return this.containerElement.appendChild(tn.createElement(this.getTemplate())),this.getElements(),this.bindEvents(),this}}]),n}();hn(".pixnet-happix-pilot__weather-card{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;color:#000}.pixnet-happix-pilot__weather-card>:not(:first-child){margin-left:8px}.pixnet-happix-pilot__weather-card img{width:40px}.pixnet-happix-pilot__weather-card span{font-family:PingFang TC;font-size:16px;font-weight:400;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1.2px;text-overflow:ellipsis}");var Pn=function(e){function n(e,i){return t(this,n),we(this,Be(n).call(this,e,i))}return je(n,Le),S(n,[{key:"getTemplate",value:function(){var t=this.getCssPrefix();return'\n            <div class="'.concat(t,'__weather-card">\n                <img src="').concat(Ze[this.props.type],'" />\n                <span>').concat(this.getTimeGreeting(),"，").concat(Qe[this.props.type],"</span>\n            </div>\n        ")}},{key:"getTimeGreeting",value:function(){var t=(new Date).getHours();return t>4&&t<11?"早安":t>10&&t<17?"午安":"晚安"}},{key:"render",value:function(){return this.containerElement.setHTML(this.getTemplate()),this}}]),n}();hn('@media screen and (max-width:768px){.pixnet-happix-pilot__happix-messenger{position:fixed;top:0;right:0;bottom:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.6);-webkit-transition:all .4s,background .4s step-end;transition:all .4s,background .4s step-end;z-index:2}.pixnet-happix-pilot__happix-messenger.hidden{opacity:0;-webkit-transition:all .4s,background .4s step-start;transition:all .4s,background .4s step-start;pointer-events:none}.pixnet-happix-pilot__happix-messenger__wrapper{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;-webkit-transition:all .4s;transition:all .4s}.pixnet-happix-pilot__happix-messenger__wrapper.hidden{-webkit-transform:translateY(100%);transform:translateY(100%)}.pixnet-happix-pilot__happix-messenger__wrapper.will-change{will-change:transform}.pixnet-happix-pilot__happix-messenger__avatar{position:absolute;top:37px;right:15px;z-index:2;cursor:pointer}.pixnet-happix-pilot__happix-messenger__content{position:absolute;top:110px;right:0;bottom:0;left:0;width:100%;height:calc(100% - 110px);padding:15px 0;background:#fff;-webkit-box-sizing:border-box;box-sizing:border-box;overflow-y:auto;-webkit-overflow-scrolling:touch;z-index:1}.pixnet-happix-pilot__happix-messenger__content>*{margin-right:20px;margin-left:15px}.pixnet-happix-pilot__happix-messenger__content__date-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:10px;margin-right:0;margin-left:0;color:#81828e;font-family:PingFang TC;font-size:11px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:.8px}.pixnet-happix-pilot__happix-messenger__content__date-container:before{content:"";-webkit-box-flex:1;-ms-flex:1;flex:1;margin-right:12px;border-top:1px solid #f2f2f2}.pixnet-happix-pilot__happix-messenger__content__date-container:after{content:"";-webkit-box-flex:1;-ms-flex:1;flex:1;margin-left:12px;border-top:1px solid #f2f2f2}.pixnet-happix-pilot__happix-messenger__content__happix-container{margin-top:20px}.pixnet-happix-pilot__happix-messenger__content__card-container>*,.pixnet-happix-pilot__happix-messenger__content__coupon-container>*,.pixnet-happix-pilot__happix-messenger__content__task-container>*{margin-top:15px;margin-left:46px}.pixnet-happix-pilot__happix-messenger__content__card-container>:first-child,.pixnet-happix-pilot__happix-messenger__content__coupon-container>:first-child,.pixnet-happix-pilot__happix-messenger__content__task-container>:first-child{margin-top:35px;margin-left:0}.pixnet-happix-pilot__happix-messenger__fixed{position:fixed}}@media screen and (min-width:769px){.pixnet-happix-pilot__happix-messenger{position:fixed;top:180px;right:0;bottom:0;left:0;width:100%;height:calc(100% - 180px);margin:auto;-webkit-transition:all .4s;transition:all .4s}.pixnet-happix-pilot__happix-messenger:focus{outline:none}.pixnet-happix-pilot__happix-messenger.hidden{opacity:0;-webkit-transform:translateY(100%);transform:translateY(100%);pointer-events:none}.pixnet-happix-pilot__happix-messenger.dangling{bottom:46px;height:calc(100% - 226px)}.pixnet-happix-pilot__happix-messenger__wrapper{position:absolute;top:0;right:0;bottom:0;width:335px;height:100%}.pixnet-happix-pilot__happix-messenger__avatar{position:absolute;top:0;right:0;z-index:2;cursor:pointer;pointer-events:auto}.pixnet-happix-pilot__happix-messenger__content{position:absolute;top:74px;right:0;bottom:0;left:0;width:100%;padding:15px 0;background:#fff;border-top-right-radius:6px;border-top-left-radius:6px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 0 4px 0 rgba(0,0,0,.4);box-shadow:0 0 4px 0 rgba(0,0,0,.4);overflow-y:auto;-webkit-overflow-scrolling:touch;z-index:1;pointer-events:auto}.pixnet-happix-pilot__happix-messenger__content>*{margin-right:20px;margin-left:15px}.pixnet-happix-pilot__happix-messenger__content__date-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:10px;margin-right:0;margin-left:0;color:#81828e;font-family:PingFang TC;font-size:11px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:.8px}.pixnet-happix-pilot__happix-messenger__content__date-container:before{content:"";-webkit-box-flex:1;-ms-flex:1;flex:1;margin-right:12px;border-top:1px solid #f2f2f2}.pixnet-happix-pilot__happix-messenger__content__date-container:after{content:"";-webkit-box-flex:1;-ms-flex:1;flex:1;margin-left:12px;border-top:1px solid #f2f2f2}.pixnet-happix-pilot__happix-messenger__content__happix-container{margin-top:20px}.pixnet-happix-pilot__happix-messenger__content__card-container>*,.pixnet-happix-pilot__happix-messenger__content__coupon-container>*,.pixnet-happix-pilot__happix-messenger__content__task-container>*{margin-top:15px;margin-left:46px}.pixnet-happix-pilot__happix-messenger__content__card-container>:first-child,.pixnet-happix-pilot__happix-messenger__content__coupon-container>:first-child,.pixnet-happix-pilot__happix-messenger__content__task-container>:first-child{margin-top:35px;margin-left:0}.pixnet-happix-pilot__happix-messenger-mask{opacity:0;-webkit-transition:opacity .4s;transition:opacity .4s;will-change:opacity}.pixnet-happix-pilot__happix-messenger-mask.show{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.6);opacity:1}}');var Tn,Sn,Bn,On=function(){return{scrollDepth:{s25:!1,s50:!1,s75:!1,s100:!1},cardTotal:0,positionMax:0}},Mn=function(e){function n(e,i){var o;return t(this,n),(o=we(this,Be(n).call(this,e,i))).saveWindowScroll(),o.track=On(),o.closeHappixMessager=o.closeHappixMessager.bind(ke(ke(o))),o}return je(n,Le),S(n,[{key:"getTemplate",value:function(){var t=this.getCssPrefix(),e=this.props&&this.props.dangling,n=(new Date).toLocaleDateString("zh-TW",{month:"long",day:"numeric",weekday:"short"});return'\n            <div class="'.concat(t,'__happix-messenger-mask"></div>\n            <div\n                class="').concat(t,"__happix-messenger hidden ").concat(e?"dangling":"",'"\n                style="max-width: ').concat(Ue.getOptions().getPilotWidth(),'px"\n            >\n                <div class="').concat(t,'__happix-messenger__wrapper hidden">\n                  <img\n                      class="').concat(t,'__happix-messenger__avatar"\n                      src="').concat($e,'/btn_happix_ufo_open.png"\n                      srcset="').concat($e,"/btn_happix_ufo_open@2x.png 2x,\n                                ").concat($e,'/btn_happix_ufo_open@3x.png 3x"\n                  />\n                  <div class="').concat(t,'__happix-messenger__content">\n                      <div class="').concat(t,'__happix-messenger__content__weather-container"></div>\n                      <div class="').concat(t,'__happix-messenger__content__date-container">\n                          ').concat(n,'\n                      </div>\n                      <div class="').concat(t,'__happix-messenger__content__happix-container"></div>\n                      <div class="').concat(t,'__happix-messenger__content__coupon-container"></div>\n                      <div class="').concat(t,'__happix-messenger__content__task-container"></div>\n                  </div>\n                </div>\n            </div>\n        ')}},{key:"getElements",value:function(){this.bodyElement=tn.getElementBySelector("body"),this.happixMaskElement=tn.getElementByPostfix("happix-messenger-mask"),this.happixMessengerElement=tn.getElementByPostfix("happix-messenger"),this.happixWrapperElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__wrapper"),this.happixAvatarElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__avatar"),this.happixContentElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__content"),this.weatherContainerElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__content__weather-container"),this.happixContainerElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__content__happix-container"),this.couponContainerElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__content__coupon-container"),this.taskContainerElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__content__task-container")}},{key:"markS25",value:function(){this.track.scrollDepth.s25=!0}},{key:"markS50",value:function(){this.track.scrollDepth.s50=!0}},{key:"markS75",value:function(){this.track.scrollDepth.s75=!0}},{key:"markS100",value:function(){this.track.scrollDepth.s100=!0}},{key:"bindEvents",value:function(){var t=this;this.happixMaskElement.bindEvent("click",this.closeHappixMessager),this.happixMessengerElement.bindEvent("click",this.closeHappixMessager),this.happixAvatarElement.bindEvent("click",this.closeHappixMessager),this.happixContentElement.bindEvent("click",function(t){t.stopPropagation()}),this.happixContentElement.bindEvent("scroll",vn.debounce(function(e){t.isMessengerVisible()&&(t.trackScrollDepth(e.target),t.trackPositionExposure())},200));var e=this.happixContentElement.getElement();this.happixContentElement.bindEvent("touchmove",vn.debounce(function(t){var n=e.scrollTop,i=e.scrollHeight,o=n+e.offsetHeight;n<=0&&o>=i?t.preventDefault():n<=0?e.scrollTop=1:o===i&&(e.scrollTop=n-1)},100,!0))}},{key:"closeHappixMessager",value:function(t){this.containerElement.fireEvent("close"),t.stopPropagation()}},{key:"trackScrollDepth",value:function(t){var e=t.scrollTopMax,n=t.scrollTop,i=this.track.scrollDepth,o=i.s25,a=i.s50,r=i.s75,s=i.s100;!o&&n>.25*e&&(sn({category:"pilot-happixPopup",action:"scrollDepth",label:"scroll-25"}),this.markS25()),!a&&n>.5*e&&(sn({category:"pilot-happixPopup",action:"scrollDepth",label:"scroll-50"}),this.markS50()),!r&&n>.75*e&&(sn({category:"pilot-happixPopup",action:"scrollDepth",label:"scroll-75"}),this.markS75()),s||n!==e||(sn({category:"pilot-happixPopup",action:"scrollDepth",label:"scroll-100"}),this.markS100())}},{key:"trackPositionExposure",value:function(){var t=this,e=this.happixCard,n=this.couponCards,i=this.taskCards,o=[];if(e){if(o.push({element:e.happixCardElement.getElement(),pos:e.msg_pos}),n){var a=n.map(function(t){return{element:t.couponCardElement.getElement(),pos:t.props.msg_pos}});o=o.concat(a)}if(i){var r=i.map(function(t){return{element:t.taskCardElement.getElement(),pos:t.props.msg_pos}});o=o.concat(r)}var s=o.filter(this.isTopLessThanWindowBottom);s.length>this.track.positionMax&&s.forEach(function(e){e.pos>t.track.positionMax&&(sn({category:"pilot-happixPopup",action:"positionImpression",label:e.pos}),t.track.positionMax=e.pos)})}}},{key:"isTopLessThanWindowBottom",value:function(t){return t.element.getBoundingClientRect().top<window.innerHeight}},{key:"resetTrackRecord",value:function(){this.track=On()}},{key:"setData",value:function(t){var e=this,n=t.weather,i=t.memberInfo,o=t.coupon,a=t.task,r=0;this.weatherCard=this.createWeatherCard({type:n}),this.happixCard=this.createHappixCard({name:i.display_name,msg_pos:1}),r++,o&&(this.couponMessageCard=this.createCouponMessageCard({message:o.intro}),this.couponCards=o.items.map(function(t){return e.createCouponCard(bn({},t,{msg_pos:++r}))})),a&&(this.taskMessageCard=this.createTaskMessageCard({message:a.intro}),this.taskCards=a.items.map(function(t){return e.createTaskCard(bn({},t,{msg_pos:++r}))})),this.track.cardTotal=r}},{key:"createWeatherCard",value:function(t){return new Pn(this.weatherContainerElement,t).render()}},{key:"createHappixCard",value:function(t){return new kn(this.happixContainerElement,t).render()}},{key:"createCouponMessageCard",value:function(t){return new wn(this.couponContainerElement,t).render()}},{key:"createCouponCard",value:function(t){return new yn(this.couponContainerElement,t).render()}},{key:"createTaskMessageCard",value:function(t){return new wn(this.taskContainerElement,t).render()}},{key:"createTaskCard",value:function(t){return new Cn(this.taskContainerElement,t).render()}},{key:"saveWindowScroll",value:function(){this.scroll={x:window.scrollX,y:window.scrollY}}},{key:"isMessengerVisible",value:function(){return!this.happixMessengerElement.hasClass("hidden")}},{key:"hide",value:function(){if(this.isMessengerVisible()){this.trackPositionExposure(),this.resetTrackRecord();var t=this.getCssPrefix();this.happixMessengerElement.addClass("hidden"),this.happixWrapperElement.addClass("hidden").removeClass("will-change"),this.happixMaskElement.removeClass("show"),En()&&(this.bodyElement.removeClass("".concat(t,"__happix-messenger__fixed")).setStyle("overflow",null),window.scroll(this.scroll.x,this.scroll.y))}return this}},{key:"show",value:function(){if(!this.isMessengerVisible()){var t=this.getCssPrefix();this.happixMessengerElement.removeClass("hidden"),this.happixWrapperElement.removeClass("hidden").addClass("will-change"),this.happixMaskElement.addClass("show"),this.happixContentElement.scrollToTop(),En()&&(this.saveWindowScroll(),this.bodyElement.addClass("".concat(t,"__happix-messenger__fixed")).setStyle("overflow","hidden")),this.happixMessengerElement.getElement().focus()}return this}},{key:"render",value:function(){return this.containerElement.setHTML(this.getTemplate()),this.getElements(),this.bindEvents(),this}}]),n}(),Nn=st("toStringTag"),jn="Arguments"==z(function(){return arguments}()),An=function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Nn))?n:jn?z(e):"Object"==(i=z(e))&&"function"==typeof e.callee?"Arguments":i},Ln=function(t,e,n,i){try{return i?e(p(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&p(o.call(t)),e}},zn=st("iterator"),Hn=Array.prototype,Fn=st("iterator"),In=o.getIteratorMethod=function(t){if(null!=t)return t[Fn]||t["@@iterator"]||A[An(t)]},Dn=n(function(t){var e={},n={},i=t.exports=function(t,i,o,a,s){var c,l,h,u,f=s?function(){return t}:In(t),x=r(o,a,i?2:1),_=0;if("function"!=typeof f)throw TypeError(t+" is not iterable!");if(function(t){return void 0!==t&&(A.Array===t||Hn[zn]===t)}(f)){for(c=D(t.length);c>_;_++)if((u=i?x(p(l=t[_])[0],l[1]):x(t[_]))===e||u===n)return u}else for(h=f.call(t);!(l=h.next()).done;)if((u=Ln(h,x,l.value,i))===e||u===n)return u};i.BREAK=e,i.RETURN=n}),Rn=st("species"),Gn=function(t,e){var n,i=p(t).constructor;return void 0===i||null==(n=p(i)[Rn])?e:a(n)},Wn=i.process,Yn=i.setImmediate,qn=i.clearImmediate,Un=i.MessageChannel,$n=i.Dispatch,Vn=0,Kn={},Xn=function(){var t=+this;if(Kn.hasOwnProperty(t)){var e=Kn[t];delete Kn[t],e()}},Jn=function(t){Xn.call(t.data)};Yn&&qn||(Yn=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return Kn[++Vn]=function(){!function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}t.apply(n,e)}("function"==typeof t?t:Function(t),e)},Tn(Vn),Vn},qn=function(t){delete Kn[t]},"process"==z(Wn)?Tn=function(t){Wn.nextTick(r(Xn,t,1))}:$n&&$n.now?Tn=function(t){$n.now(r(Xn,t,1))}:Un?(Bn=(Sn=new Un).port2,Sn.port1.onmessage=Jn,Tn=r(Bn.postMessage,Bn,1)):i.addEventListener&&"function"==typeof postMessage&&!i.importScripts?(Tn=function(t){i.postMessage(t+"","*")},i.addEventListener("message",Jn,!1)):Tn="onreadystatechange"in f("script")?function(t){nt.appendChild(f("script")).onreadystatechange=function(){nt.removeChild(this),Xn.call(t)}}:function(t){setTimeout(r(Xn,t,1),0)});var Zn={set:Yn,clear:qn},Qn=Zn.set,ti=i.MutationObserver||i.WebKitMutationObserver,ei=i.process,ni=i.Promise,ii="process"==z(ei);var oi={f:function(t){return new function(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=a(e),this.reject=a(n)}(t)}},ai=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},ri=i.navigator,si=ri&&ri.userAgent||"",pi=function(t,e){if(p(t),s(e)&&e.constructor===t)return e;var n=oi.f(t);return(0,n.resolve)(e),n.promise},ci=st("species"),li=st("iterator"),hi=!1;try{[7][li]().return=function(){hi=!0}}catch(T){}var ui,fi,xi,_i,di=Zn.set,gi=function(){var t,e,n,o=function(){var i,o;for(ii&&(i=ei.domain)&&i.exit();t;){o=t.fn,t=t.next;try{o()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(ii)n=function(){ei.nextTick(o)};else if(!ti||i.navigator&&i.navigator.standalone)if(ni&&ni.resolve){var a=ni.resolve(void 0);n=function(){a.then(o)}}else n=function(){Qn.call(i,o)};else{var r=!0,s=document.createTextNode("");new ti(o).observe(s,{characterData:!0}),n=function(){s.data=r=!r}}return function(i){var o={fn:i,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}(),mi=i.TypeError,bi=i.process,vi=bi&&bi.versions,yi=vi&&vi.v8||"",ki=i.Promise,wi="process"==An(bi),Ei=function(){},Ci=fi=oi.f,Pi=!!function(){try{var t=ki.resolve(1),e=(t.constructor={})[st("species")]=function(t){t(Ei,Ei)};return(wi||"function"==typeof PromiseRejectionEvent)&&t.then(Ei)instanceof e&&0!==yi.indexOf("6.6")&&-1===si.indexOf("Chrome/66")}catch(t){}}(),Ti=function(t){var e;return!(!s(t)||"function"!=typeof(e=t.then))&&e},Si=function(t,e){if(!t._n){t._n=!0;var n=t._c;gi(function(){for(var i=t._v,o=1==t._s,a=0,r=function(e){var n,a,r,s=o?e.ok:e.fail,p=e.resolve,c=e.reject,l=e.domain;try{s?(o||(2==t._h&&Mi(t),t._h=1),!0===s?n=i:(l&&l.enter(),n=s(i),l&&(l.exit(),r=!0)),n===e.promise?c(mi("Promise-chain cycle")):(a=Ti(n))?a.call(n,p,c):p(n)):c(i)}catch(t){l&&!r&&l.exit(),c(t)}};n.length>a;)r(n[a++]);t._c=[],t._n=!1,e&&!t._h&&Bi(t)})}},Bi=function(t){di.call(i,function(){var e,n,o,a=t._v,r=Oi(t);if(r&&(e=ai(function(){wi?bi.emit("unhandledRejection",a,t):(n=i.onunhandledrejection)?n({promise:t,reason:a}):(o=i.console)&&o.error&&o.error("Unhandled promise rejection",a)}),t._h=wi||Oi(t)?2:1),t._a=void 0,r&&e.e)throw e.v})},Oi=function(t){return 1!==t._h&&0===(t._a||t._c).length},Mi=function(t){di.call(i,function(){var e;wi?bi.emit("rejectionHandled",t):(e=i.onrejectionhandled)&&e({promise:t,reason:t._v})})},Ni=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),Si(e,!0))},ji=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw mi("Promise can't be resolved itself");(e=Ti(t))?gi(function(){var i={_w:n,_d:!1};try{e.call(t,r(ji,i,1),r(Ni,i,1))}catch(t){Ni.call(i,t)}}):(n._v=t,n._s=1,Si(n,!1))}catch(t){Ni.call({_w:n,_d:!1},t)}}};Pi||(ki=function(t){(function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!")})(this,ki,"Promise","_h"),a(t),ui.call(this);try{t(r(ji,this,1),r(Ni,this,1))}catch(t){Ni.call(this,t)}},(ui=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,n){for(var i in e)n&&t[i]?t[i]=e[i]:b(t,i,e[i]);return t}(ki.prototype,{then:function(t,e){var n=Ci(Gn(this,ki));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=wi?bi.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&Si(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),xi=function(){var t=new ui;this.promise=t,this.resolve=r(ji,t,1),this.reject=r(Ni,t,1)},oi.f=Ci=function(t){return t===ki||t===_i?new xi(t):fi(t)}),w(w.G+w.W+w.F*!Pi,{Promise:ki}),lt(ki,"Promise"),function(t){var e="function"==typeof o[t]?o[t]:i[t];l&&e&&!e[ci]&&g.f(e,ci,{configurable:!0,get:function(){return this}})}("Promise"),_i=o.Promise,w(w.S+w.F*!Pi,"Promise",{reject:function(t){var e=Ci(this);return(0,e.reject)(t),e.promise}}),w(w.S+!0*w.F,"Promise",{resolve:function(t){return pi(this===_i?ki:this,t)}}),w(w.S+w.F*!(Pi&&function(t,e){if(!e&&!hi)return!1;var n=!1;try{var i=[7],o=i[li]();o.next=function(){return{done:n=!0}},i[li]=function(){return o},t(i)}catch(t){}return n}(function(t){ki.all(t).catch(Ei)})),"Promise",{all:function(t){var e=this,n=Ci(e),i=n.resolve,o=n.reject,a=ai(function(){var n=[],a=0,r=1;Dn(t,!1,function(t){var s=a++,p=!1;n.push(void 0),r++,e.resolve(t).then(function(t){p||(p=!0,n[s]=t,--r||i(n))},o)}),--r||i(n)});return a.e&&o(a.v),n.promise},race:function(t){var e=this,n=Ci(e),i=n.reject,o=ai(function(){Dn(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return o.e&&i(o.v),n.promise}}),w(w.P+w.R,"Promise",{finally:function(t){var e=Gn(this,o.Promise||i.Promise),n="function"==typeof t;return this.then(n?function(n){return pi(e,t()).then(function(){return n})}:t,n?function(n){return pi(e,t()).then(function(){throw n})}:t)}}),w(w.S,"Promise",{try:function(t){var e=oi.f(this),n=ai(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}});var Ai=o.Promise,Li={sendHappixAPI:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=Ue.getOptions().getDomainAppend();if(window.pix&&window.pix.member_token){var o={headers:{Authorization:window.pix.member_token}};n=Ye({},n,o)}return this[t]("".concat("https://happix-pilot-api.pixnet.cc").concat(i).concat(e),n)},get:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.ajax("GET",t,e)},post:function(t,e){return this.ajax("POST",t,e)},ajax:function(t,e,n){return new Ai(function(i,o){var a=new XMLHttpRequest;a.open(t,e,!0),a.onload=function(){4===a.readyState&&200===a.status&&""!==a.response?i(JSON.parse(a.response)):o(a)},a.onerror=function(){o(a)},n&&n.headers&&De(n.headers).forEach(function(t){a.setRequestHeader(t,n.headers[t])}),a.send(n)})}};hn("@media screen and (max-width:768px){.pixnet-happix-pilot__comment-amount{position:relative;top:-9px;display:block;font-size:12px;color:#81828e}}@media screen and (min-width:769px){.pixnet-happix-pilot__comment-amount{position:relative;top:-9px;display:block;font-size:12px;color:#81828e}}");var zi=function(e){function n(e){var i;return t(this,n),(i=we(this,Be(n).call(this,e))).cssPrefix=i.getCssPrefix(),i}return je(n,Le),S(n,[{key:"getTemplates",value:function(){return'\n            <img src="'.concat("https://s.pixfs.net/common",'/icons/btn_comment.svg">\n            <span class="').concat(this.cssPrefix,'__comment-amount"></span>\n        ')}},{key:"getCommentAmount",value:function(){var t=document.querySelector(".".concat(this.cssPrefix,"__comment-amount"))||{},e=document.getElementsByTagName("body")[0].dataset.commentsCount||"";t.innerText=e}},{key:"render",value:function(){this.containerElement.setHTML(this.getTemplates()),this.getCommentAmount()}}]),n}();function Hi(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";!pix.member_token&&window.pixgame&&!window.pixgame.getState("sharedTopic")&&(window.pixgame.showPromptLoginPopup(t),window.pixgame.setState("sharedTopic",!0),window.pixgame.setStorge("pixSharedPost",1),t)||t&&(t.indexOf("facebook")>-1?window.open(t,"Facebook","height=550,width=550,resizable=1"):location.href=t)}hn("@media screen and (max-width:768px){.pixnet-happix-pilot__share-list{position:absolute;bottom:45px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around;max-height:0;width:127px;height:42px;margin-top:4px;background-color:#fff;border-radius:30px;-webkit-box-shadow:0 0 15px 0 rgba(0,0,0,.1);box-shadow:0 0 15px 0 rgba(0,0,0,.1);-webkit-transition:max-height .3s;transition:max-height .3s;overflow:hidden}.pixnet-happix-pilot__share-list.action{max-height:42px}.pixnet-happix-pilot__share-list>a{display:block;height:32px}.pixnet-happix-pilot__share-list__share-fb,.pixnet-happix-pilot__share-list__share-line,.pixnet-happix-pilot__share-list__share-link{display:inline-block;width:32px;height:32px;cursor:pointer}.pixnet-happix-pilot__share-list__share-line{background:url(https://streamtopic.pixnet.net/asset/images/icons/btn_line.svg) 0 no-repeat}.pixnet-happix-pilot__share-list__share-link{background:url(https://streamtopic.pixnet.net/asset/images/icons/btn_copylink.svg) 0 no-repeat}.pixnet-happix-pilot__share-list__share-fb{background:url(https://streamtopic.pixnet.net/asset/images/icons/btn_share_fb.svg) 0 no-repeat}}@media screen and (min-width:769px){.pixnet-happix-pilot__share-list{position:absolute;bottom:45px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around;max-height:0;width:127px;height:42px;margin-top:4px;background-color:#fff;border-radius:30px;-webkit-box-shadow:0 0 15px 0 rgba(0,0,0,.1);box-shadow:0 0 15px 0 rgba(0,0,0,.1);-webkit-transition:max-height .3s;transition:max-height .3s;overflow:hidden}.pixnet-happix-pilot__share-list.action{max-height:42px}.pixnet-happix-pilot__share-list>a{display:block;height:32px}.pixnet-happix-pilot__share-list__share-fb,.pixnet-happix-pilot__share-list__share-link{display:inline-block;width:32px;height:32px;cursor:pointer}.pixnet-happix-pilot__share-list__share-fb{background:url(https://streamtopic.pixnet.net/asset/images/icons/btn_share_fb.svg) 0 no-repeat}.pixnet-happix-pilot__share-list__share-link{background:url(https://streamtopic.pixnet.net/asset/images/icons/btn_copylink.svg) 0 no-repeat}}");var Fi=function(e){function n(e){var i;return t(this,n),(i=we(this,Be(n).call(this,e))).cssPrefix=i.getCssPrefix(),i.isMobile="mobile"===window.deviceType,i}return je(n,Le),S(n,[{key:"getTemplates",value:function(){var t='<span class="'.concat(this.cssPrefix,'__share-list__share-line"></span>');return'\n            <div class="'.concat(this.cssPrefix,'__share-list-mask"></div>\n            <img src="').concat("https://s.pixfs.net/common",'/icons/btn_share.svg" alt="分享" />\n            <div class="').concat(this.cssPrefix,'__share-list">\n                ').concat(this.isMobile?t:"",'\n                <span class="').concat(this.cssPrefix,'__share-list__share-fb"></span>\n                <span class="').concat(this.cssPrefix,'__share-list__share-link"></span>\n            </div>\n        ')}},{key:"bindEvent",value:function(){var t=this;this.shareList=tn.getElementByPostfix("share-list"),this.fbButton=this.shareList.getElementByPostfix("share-list__share-fb"),this.copyLinkButton=this.shareList.getElementByPostfix("share-list__share-link"),this.isMobile&&(this.lineButton=this.shareList.getElementByPostfix("share-list__share-line"),this.lineButton.bindEvent("click",function(){Hi(t.getLINEShareLink()),sn({category:"functionBar",action:"shareClick",label:"shareLine"})})),this.fbButton.bindEvent("click",function(){Hi(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"https://www.facebook.com/sharer/sharer.php?\n        app_id=".concat(Ve,"&display=popup&u=").concat(encodeURIComponent(t))}(location.href)),sn({category:"functionBar",action:"shareClick",label:"shareFB"})}),this.copyLinkButton.bindEvent("click",function(){(function(){try{var t=document.createElement("input"),e=document.getElementById("header-prompt"),n=document.getElementsByTagName("body")[0],i=location.href;if(t.value=i,n.appendChild(t),navigator.userAgent.match(/ipad|ipod|iphone/i)){var o=t.contentEditable,a=t.readOnly,r=document.createRange(),s=window.getSelection();t.contentEditable=!0,t.readOnly=!0,r.selectNodeContents(t),s.removeAllRanges(),s.addRange(r),t.setSelectionRange(0,999999),t.contentEditable=o,t.readOnly=a}else t.select();document.execCommand("copy"),t.blur(),t.remove(),e&&(e.innerHTML="複製連結成功(・∀・)b",e.classList+=" prompt-success",setTimeout(function(){e.classList="header-prompt"},2e3))}catch(t){console.log(exception)}})(),Hi(),sn({category:"functionBar",action:"shareClick",label:"shareLink"})})}},{key:"getLINEShareLink",value:function(){var t=encodeURIComponent(location.href);return"https://social-plugins.line.me/lineit/share?url=".concat(t)}},{key:"render",value:function(){this.containerElement.setHTML(this.getTemplates()),this.bindEvent()}}]),n}(),Ii=function(t,e){if(t){var n=_n(t),i=fn.now();return fn.withinSpecificHours(n,i,e)}return!1};hn("@media screen and (max-width:768px){.pixnet-happix-pilot__launcher-bar{position:fixed;right:0;bottom:0;left:0;width:100%;height:45px;-webkit-box-shadow:0 -2px 20px 0 rgba(0,0,0,.1);box-shadow:0 -2px 20px 0 rgba(0,0,0,.1)}.pixnet-happix-pilot__launcher-bar>*{-webkit-font-smoothing:antialiased}.pixnet-happix-pilot__launcher-bar-mask{position:fixed;z-index:3;top:0;bottom:0;width:100vw;height:100%;background:rgba(0,0,0,.6);opacity:0;pointer-events:none;-webkit-transition:opacity .3s;transition:opacity .3s;will-change:opacity}.pixnet-happix-pilot__launcher-bar-mask.active{opacity:1;pointer-events:auto}.pixnet-happix-pilot__launcher-bar__wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%}.pixnet-happix-pilot__launcher-bar__item-container{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;background:#fff;z-index:1}.pixnet-happix-pilot__launcher-bar__item-container__line{position:absolute;top:0;right:0;width:0;height:2px;background-color:#6eacf5;-webkit-transition:.5s;transition:.5s}.pixnet-happix-pilot__launcher-bar__item-container__line.show{width:100%}.pixnet-happix-pilot__launcher-bar__comment,.pixnet-happix-pilot__launcher-bar__share{position:relative;z-index:2;display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;margin-left:16px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer}.pixnet-happix-pilot__launcher-bar__button-container{position:absolute;top:0;right:0;bottom:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:110px;height:100%;padding:0 6px;background:#6eacf5;border-top-left-radius:22px;border-bottom-left-radius:22px;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1;-webkit-transition:.5s;transition:.5s}.pixnet-happix-pilot__launcher-bar__button-container>:not(:first-child){margin-left:24px}.pixnet-happix-pilot__launcher-bar__button-container.show{border-top-left-radius:0}.pixnet-happix-pilot__launcher-bar__button-container__gift-button{width:30px;height:30px;position:relative;display:inline-block;cursor:pointer;border-radius:100%;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.pixnet-happix-pilot__launcher-bar__button-container__gift-button-inner{width:30px;height:30px;position:absolute;top:0;right:0;bottom:0;left:0;margin:auto;background-color:#fff;border-radius:100%;-webkit-transition:all .3s ease;transition:all .3s ease}.showed-gift>.pixnet-happix-pilot__launcher-bar__button-container__gift-button-inner{width:0;height:0}.showed-gift .pixnet-happix-pilot__launcher-bar__button-container__gift-button--hidden{-webkit-transform:translate(-50%,-150%);transform:translate(-50%,-150%)}.showed-gift .pixnet-happix-pilot__launcher-bar__button-container__gift-button--show{-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.pixnet-happix-pilot__launcher-bar__button-container__gift-button--hidden,.pixnet-happix-pilot__launcher-bar__button-container__gift-button--show{position:absolute;left:50%;top:50%;font-size:50px;-webkit-transition:all .3s ease;transition:all .3s ease;z-index:1}.pixnet-happix-pilot__launcher-bar__button-container__gift-button--hidden{-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.pixnet-happix-pilot__launcher-bar__button-container__gift-button--show{-webkit-transform:translate(-50%,50%);transform:translate(-50%,50%)}.pixnet-happix-pilot__launcher-bar__button-container__happix-button{position:relative;margin:0 auto;-webkit-perspective:1000;perspective:1000;-webkit-backface-visibility:hidden;backface-visibility:hidden}.pixnet-happix-pilot__launcher-bar__button-container__happix-button span{width:30px;height:30px}.pixnet-happix-pilot__launcher-bar__button-container .wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.pixnet-happix-pilot__launcher-bar__button-container .wrapper.notify span{position:relative;display:block;border-radius:50%;-webkit-box-shadow:0 0 0 0 #fff;box-shadow:0 0 0 0 #fff;-webkit-animation:happix_pulse 1.5s 5;animation:happix_pulse 1.5s 5}.pixnet-happix-pilot__launcher-bar__button-container .wrapper img{width:30px;cursor:pointer}}@media screen and (min-width:769px){.pixnet-happix-pilot__launcher-bar{position:fixed;right:0;bottom:0;left:0;width:100%;height:45px;background-color:#fff;-webkit-box-shadow:0 -2px 20px 0 rgba(0,0,0,.1);box-shadow:0 -2px 20px 0 rgba(0,0,0,.1)}.pixnet-happix-pilot__launcher-bar>*{-webkit-font-smoothing:antialiased}.pixnet-happix-pilot__launcher-bar-mask{position:fixed;z-index:3;top:0;bottom:0;width:100vw;height:100%;background:rgba(0,0,0,.6);opacity:0;pointer-events:none;-webkit-transition:opacity .3s;transition:opacity .3s;will-change:opacity}.pixnet-happix-pilot__launcher-bar-mask.active{opacity:1;pointer-events:auto}.pixnet-happix-pilot__launcher-bar .right{position:absolute;right:0;height:100%;width:50%;background:#6eacf5}.pixnet-happix-pilot__launcher-bar__wrapper{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;margin:auto}.pixnet-happix-pilot__launcher-bar__item-container{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;background:#fff;z-index:1}.pixnet-happix-pilot__launcher-bar__item-container__line{position:absolute;top:0;right:0;width:0;height:2px;background-color:#6eacf5;-webkit-transition:.5s;transition:.5s}.pixnet-happix-pilot__launcher-bar__comment,.pixnet-happix-pilot__launcher-bar__share{position:relative;z-index:2;display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;margin-left:16px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer}.pixnet-happix-pilot__launcher-bar__button-container{position:absolute;top:0;right:0;bottom:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:110px;height:100%;padding:0 6px;background:#6eacf5;border-top-left-radius:22px;border-bottom-left-radius:22px;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1;-webkit-transition:.5s;transition:.5s}.pixnet-happix-pilot__launcher-bar__button-container>:not(:first-child){margin-left:24px}.pixnet-happix-pilot__launcher-bar__button-container__gift-button{width:30px;height:30px;position:relative;display:inline-block;cursor:pointer;border-radius:100%;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.pixnet-happix-pilot__launcher-bar__button-container__gift-button-inner{width:30px;height:30px;position:absolute;top:0;right:0;bottom:0;left:0;margin:auto;background-color:#fff;border-radius:100%;-webkit-transition:all .3s ease;transition:all .3s ease}.showed-gift>.pixnet-happix-pilot__launcher-bar__button-container__gift-button-inner{width:0;height:0}.showed-gift .pixnet-happix-pilot__launcher-bar__button-container__gift-button--hidden{-webkit-transform:translate(-50%,-150%);transform:translate(-50%,-150%)}.showed-gift .pixnet-happix-pilot__launcher-bar__button-container__gift-button--show{-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.pixnet-happix-pilot__launcher-bar__button-container__gift-button--hidden,.pixnet-happix-pilot__launcher-bar__button-container__gift-button--show{position:absolute;left:50%;top:50%;font-size:50px;-webkit-transition:all .3s ease;transition:all .3s ease;z-index:1}.pixnet-happix-pilot__launcher-bar__button-container__gift-button--hidden{-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.pixnet-happix-pilot__launcher-bar__button-container__gift-button--show{-webkit-transform:translate(-50%,50%);transform:translate(-50%,50%)}.pixnet-happix-pilot__launcher-bar__button-container__happix-button{position:relative;margin:0 auto;-webkit-perspective:1000;perspective:1000;-webkit-backface-visibility:hidden;backface-visibility:hidden}.pixnet-happix-pilot__launcher-bar__button-container__happix-button span{width:30px;height:30px}.pixnet-happix-pilot__launcher-bar__button-container .wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.pixnet-happix-pilot__launcher-bar__button-container .wrapper.notify span{position:relative;display:block;border-radius:50%;-webkit-box-shadow:0 0 0 0 #fff;box-shadow:0 0 0 0 #fff;-webkit-animation:happix_pulse 1.5s 5;animation:happix_pulse 1.5s 5}.pixnet-happix-pilot__launcher-bar__button-container .wrapper img{width:30px;cursor:pointer}}@-webkit-keyframes happix_pulse{0%{-webkit-transform:scale(1);transform:scale(1)}70%{-webkit-transform:scale(1.1);transform:scale(1.1);-webkit-box-shadow:0 0 0 7px hsla(0,0%,100%,0);box-shadow:0 0 0 7px hsla(0,0%,100%,0)}to{-webkit-transform:scale(1);transform:scale(1);-webkit-box-shadow:0 0 0 0 hsla(0,0%,100%,0);box-shadow:0 0 0 0 hsla(0,0%,100%,0)}}@keyframes happix_pulse{0%{-webkit-transform:scale(1);transform:scale(1)}70%{-webkit-transform:scale(1.1);transform:scale(1.1);-webkit-box-shadow:0 0 0 7px hsla(0,0%,100%,0);box-shadow:0 0 0 7px hsla(0,0%,100%,0)}to{-webkit-transform:scale(1);transform:scale(1);-webkit-box-shadow:0 0 0 0 hsla(0,0%,100%,0);box-shadow:0 0 0 0 hsla(0,0%,100%,0)}}");var Di=function(e){function n(e){var i;return t(this,n),(i=we(this,Be(n).call(this,e))).options=Ue.getOptions(),i.scrollCallbacks=[],i.scrollListener=null,i.happixMessengerData={data:{},setDataFlag:!1},i.clickShowGiftButton=i.clickShowGiftButton.bind(ke(ke(i))),i.clickHideGiftButton=i.clickHideGiftButton.bind(ke(ke(i))),i.clickShowHappixButton=i.clickShowHappixButton.bind(ke(ke(i))),i.clickHideHappixButton=i.clickHideHappixButton.bind(ke(ke(i))),i.showGiftNotification=i.showGiftNotification.bind(ke(ke(i))),i.hideGiftNotification=i.hideGiftNotification.bind(ke(ke(i))),i.showHappixMessenger=i.showHappixMessenger.bind(ke(ke(i))),i.hideHappixMessenger=i.hideHappixMessenger.bind(ke(ke(i))),i}return je(n,Le),S(n,[{key:"getTemplate",value:function(){var t=this.getCssPrefix();return'\n            <div class="'.concat(t,'__launcher-bar-mask"></div>\n            <div class="').concat(t,'__launcher-bar"\n                style="z-index:').concat(this.options.getPilotZIndex(),'"\n            >\n                <div class="left"></div>\n                <div class="right"></div>\n                <div\n                    class="').concat(t,'__launcher-bar__wrapper"\n                    style="max-width: ').concat(this.options.getPilotWidth(),'px"\n                >\n                    <div class="').concat(t,'__launcher-bar__gift-notification"></div>\n                    <div class="').concat(t,'__launcher-bar__comment"></div>\n                    <div class="').concat(t,'__launcher-bar__share"></div>\n                    <div class="').concat(t,'__launcher-bar__item-container">\n                        <div class="').concat(t,'__launcher-bar__item-container__line"></div>\n                    </div>\n                    <div class="').concat(t,'__launcher-bar__button-container">\n                        <div\n                            class="\n                                ').concat(t,'__launcher-bar__button-container__gift-button\n                                wrapper\n                            "\n                        >\n                            <div class="').concat(t,'__launcher-bar__button-container__gift-button-inner">\n                                <img\n                                    class="').concat(t,'__launcher-bar__button-container__gift-button--hidden"\n                                    src="').concat($e,'/btn_gift_cta_no.svg"\n                                />\n                                <img\n                                    class="').concat(t,'__launcher-bar__button-container__gift-button--show"\n                                    src="').concat($e,'/btn_gift.svg"\n                                />\n                            </div>\n                        </div>\n                        <div\n                            class="\n                                ').concat(t,'__launcher-bar__button-container__happix-button\n                                wrapper\n                            "\n                        >\n                            <span><img src="').concat($e,'/btn_happix_guide.svg" /></span>\n                        </div>\n                    </div>\n                </div>\n                <div class="').concat(t,'__launcher-bar__happix-messenger"></div>\n                <div class="').concat(t,'__launcher-bar__happix-notification"></div>\n            </div>\n        ')}},{key:"getElements",value:function(){this.maskElement=tn.getElementByPostfix("launcher-bar-mask"),this.launcherBarElement=tn.getElementByPostfix("launcher-bar"),this.itemContainerLine=this.launcherBarElement.getElementByPostfix("launcher-bar__item-container__line"),this.buttonContainerElement=this.launcherBarElement.getElementByPostfix("launcher-bar__button-container"),this.giftButtonElement=this.launcherBarElement.getElementByPostfix("launcher-bar__button-container__gift-button"),this.happixButtonElement=this.launcherBarElement.getElementByPostfix("launcher-bar__button-container__happix-button"),this.happixNotificationElement=this.launcherBarElement.getElementByPostfix("launcher-bar__happix-notification"),this.giftNotificationElement=this.launcherBarElement.getElementByPostfix("launcher-bar__gift-notification"),this.happixMessengerElement=this.launcherBarElement.getElementByPostfix("launcher-bar__happix-messenger"),this.commentElement=this.launcherBarElement.getElementByPostfix("launcher-bar__comment"),this.shareElement=this.launcherBarElement.getElementByPostfix("launcher-bar__share")}},{key:"bindEvents",value:function(){var t=this;this.maskElement.bindEvent("click",function(){t.closeShareList()}),this.happixNotificationElement.bindEvent("click",function(){t.showHappixMessenger(),sn({category:"pilot-happixSpeak",action:"happixClick"})}),this.happixNotificationElement.bindEvent("close",function(){t.hideHappixNotification(),sn({category:"pilot-happixSpeak",action:"happixClose"})}),this.giftNotificationElement.bindEvent("close",function(){t.hideGiftNotification()}),this.giftButtonElement.bindEvent("click",this.clickGiftButton),this.happixMessengerElement.bindEvent("close",this.hideHappixMessenger),this.happixButtonElement.bindEvent("click",this.clickShowHappixButton),this.commentElement.bindEvent("click",function(){t.activateCommentBlock(),sn({category:"functionBar",action:"commentClick"})}),this.shareElement.bindEvent("click",function(){t.toggleShareList()})}},{key:"setData",value:function(t,e,n,i,o){this.happixMessengerData.data={weather:t,memberInfo:e,coupon:n,task:i},this.happixNotification.setMessage(o)}},{key:"setGiftNotificationData",value:function(t){Ue.setOptions({giftNotificationContent:t}),on(t.widget_content.ga,Ue.getOptions().getMemberUniqid()),pn("CTA_Load"),this.giftNotification=new un(this.giftNotificationElement,t).render().hide(),this.activateGiftNotificationFlow()}},{key:"clickShowGiftButton",value:function(){this.showGiftNotification(),sn({category:"pilot-CTA",action:"giftClickOpen"})}},{key:"clickHideGiftButton",value:function(){this.hideGiftNotification(),sn({category:"pilot-CTA",action:"giftClickClose"})}},{key:"clickShowHappixButton",value:function(){this.showHappixMessenger(),sn({category:"pilot-happixSpeak",action:"smallHappixClick"})}},{key:"clickHideHappixButton",value:function(){this.hideHappixMessenger(),sn({category:"pilot-happixSpeak",action:"smallHappixClick"})}},{key:"showHappixNotification",value:function(){this.happixNotification.show(),this.giftButtonElement.removeClass("notify"),this.giftButtonElement.unbindEvent("click",this.showGiftNotification),this.happixButtonElement.removeClass("notify"),this.happixButtonElement.addClass("expand");var t=this.giftButtonElement.getElementBySelector("img");t.getElement().src="".concat($e,"/btn_gift_cta_no.svg"),t.setStyle("cursor","not-allowed"),xn("pilot_bar_happix_noti_showed_timestamp",fn.now())}},{key:"hideHappixNotification",value:function(){var t=this;this.happixNotification.hide(),this.giftButtonElement.addClass("notify"),this.giftButtonElement.bindEvent("click",this.showGiftNotification),this.happixButtonElement.removeClass("expand"),this.happixButtonElement.addClass("collapse"),setTimeout(function(){t.happixButtonElement.addClass("notify")},334)}},{key:"showGiftNotification",value:function(){this.giftNotification&&(this.giftNotification.show(),this.hideHappixMessenger(),this.itemContainerLine.addClass("show"),this.buttonContainerElement.addClass("show"),this.buttonContainerElement.addClass("showed-gift"),this.giftButtonElement.removeClass("notify"),this.giftButtonElement.removeClass("collapse"),this.giftButtonElement.unbindEvent("click",this.clickShowGiftButton),this.giftButtonElement.bindEvent("click",this.clickHideGiftButton))}},{key:"hideGiftNotification",value:function(){var t=this;this.giftNotification&&this.giftNotification.hide(),this.itemContainerLine.removeClass("show"),this.buttonContainerElement.removeClass("show"),this.giftButtonElement.addClass("collapse"),this.giftButtonElement.unbindEvent("click",this.clickHideGiftButton),this.giftButtonElement.bindEvent("click",this.clickShowGiftButton),setTimeout(function(){t.giftButtonElement.addClass("notify")},334)}},{key:"showHappixMessenger",value:function(){var t=this.happixMessengerData,e=t.data;t.setDataFlag||(this.happixMessenger.setData(e),this.happixMessengerData.setDataFlag=!0),this.hideGiftNotification(),this.happixButtonElement.removeClass("notify"),this.happixButtonElement.removeClass("collapse"),this.happixButtonElement.addClass("expand"),this.happixMessenger.show(),this.happixButtonElement.unbindEvent("click",this.clickShowHappixButton),this.happixButtonElement.bindEvent("click",this.clickHideHappixButton)}},{key:"hideHappixMessenger",value:function(){this.happixButtonElement.removeClass("expand"),this.happixButtonElement.addClass("collapse"),this.happixMessenger.hide(),this.happixButtonElement.unbindEvent("click",this.clickHideHappixButton),this.happixButtonElement.bindEvent("click",this.clickShowHappixButton)}},{key:"toggleShareList",value:function(){this.shareElement.getElementByPostfix("share-list").hasClass("action")?this.closeShareList():this.openShareList()}},{key:"openShareList",value:function(){this.maskElement.addClass("active"),this.shareElement.getElementByPostfix("share-list").addClass("action")}},{key:"closeShareList",value:function(){this.maskElement.removeClass("active"),this.shareElement.getElementByPostfix("share-list").removeClass("action")}},{key:"activateCommentBlock",value:function(){if("mobile"!==(window.deviceType||"")){var t=document.getElementById("comment_text");t&&(window.scrollTo(0,t.offsetBottom-50),t.focus())}else{var e=document.getElementById("comment-block");if(!e)return;e.classList.add("active")}}},{key:"activateHappixNotificationFlow",value:function(){var t=this;if(!Ii("pilot_bar_click_timestamp",24)){if(Ii("pilot_bar_happix_noti_showed_timestamp",168))return;setTimeout(function(){t.showHappixNotification(),setTimeout(function(){t.hideHappixNotification(),t.happixButtonElement.addClass("notify")},1e4)},1e4),sn({category:"pilot-happixSpeak",action:"happixImpression"})}}},{key:"subscribeScroll3Screens",value:function(t){var e,n,i=this;this.scrollCallbacks.push(t),this.scrollListener||(this.scrollListener=(e=function(){var t=window.screen.availHeight;window.scrollY>3*t&&(i.scrollCallbacks.forEach(function(t){return t()}),window.removeEventListener("scroll",i.scrollListener),i.scrollListener=null)},600,n=Date.now(),function(){n+600-Date.now()<0&&(e(),n=Date.now())}).bind(this),window.addEventListener("scroll",this.scrollListener))}},{key:"activateGiftNotificationFlow",value:function(){var t=this;if(!Ii("pilot_bar_click_timestamp",24)){if(window.innerHeight<530)return this.buttonContainerElement.addClass("showed-gift"),void this.giftButtonElement.bindEvent("click",this.clickShowGiftButton);setTimeout(function(){t.showGiftNotification(),setTimeout(function(){t.happixButtonElement.addClass("notify")},1e4)},3e3)}}},{key:"render",value:function(){return this.containerElement.setHTML(this.getTemplate()),this.getElements(),this.bindEvents(),this.happixNotification=new dn(this.happixNotificationElement).render().hide(),this.happixMessenger=new Mn(this.happixMessengerElement,{dangling:!0}).render().hide(),this.Comment=new zi(this.commentElement).render(),this.Share=new Fi(this.shareElement).render(),this}}]),n}();hn("@media screen and (max-width:768px){.pixnet-happix-pilot__launcher-bubble{position:fixed;width:calc(100% - 25px);bottom:15px}.pixnet-happix-pilot__launcher-bubble>*{-webkit-font-smoothing:antialiased}.pixnet-happix-pilot__launcher-bubble__noti_container{position:fixed;right:80px;bottom:15px;display:inline-block;max-width:calc(100% - 105px);height:60px}.pixnet-happix-pilot__launcher-bubble__hidden{display:inline-block;overflow:hidden;width:60%;height:60px;font-size:10px;opacity:.1;visibility:hidden;-webkit-transform:translateX(30px);transform:translateX(30px);-webkit-transition:width .2s linear,opacity .3s linear,visibility .2s linear,-webkit-transform .2s linear;transition:width .2s linear,opacity .3s linear,visibility .2s linear,-webkit-transform .2s linear;transition:width .2s linear,opacity .3s linear,visibility .2s linear,transform .2s linear;transition:width .2s linear,opacity .3s linear,visibility .2s linear,transform .2s linear,-webkit-transform .2s linear}.pixnet-happix-pilot__launcher-bubble__noti_msg{position:relative;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;border:none;font-family:PingFang TC;font-size:13px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;-webkit-transition:width .3s linear,opacity .3s linear,visibility .2s linear;transition:width .3s linear,opacity .3s linear,visibility .2s linear;cursor:pointer}.pixnet-happix-pilot__launcher-bubble__noti_msg-text{display:inline-block;width:calc(100% - 8px);padding:12px 15px;padding-right:7px;border-radius:20px;border-top-right-radius:0;background-color:rgba(0,0,0,.8)}.pixnet-happix-pilot__launcher-bubble__noti_msg .decoration{-webkit-transform:translateX(-1%);transform:translateX(-1%)}.pixnet-happix-pilot__launcher-bubble__btn_close_alpha{position:absolute;top:-25px;left:-17px;cursor:pointer}.pixnet-happix-pilot__launcher-bubble__btn_happix_ufo{position:fixed;right:10px;bottom:0;width:70px;height:80px;-o-object-fit:contain;object-fit:contain;cursor:pointer}}@media screen and (min-width:769px){.pixnet-happix-pilot__launcher-bubble{position:fixed;right:0;left:0;bottom:30px;width:calc(100% - 25px);margin:auto}.pixnet-happix-pilot__launcher-bubble>*{-webkit-font-smoothing:antialiased}.pixnet-happix-pilot__launcher-bubble__noti_container{position:absolute;right:80px;bottom:15px;width:calc(100% - 105px);max-width:240px}.pixnet-happix-pilot__launcher-bubble__noti_container.pixnet-happix-pilot__hidden{width:0}.pixnet-happix-pilot__launcher-bubble__noti_msg{position:relative;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;border:none;font-family:PingFang TC;font-size:13px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;cursor:pointer;-webkit-transition:width .3s linear,opacity .3s linear,visibility .2s linear;transition:width .3s linear,opacity .3s linear,visibility .2s linear}.pixnet-happix-pilot__launcher-bubble__noti_msg-text{display:inline-block;width:calc(100% - 8px);padding:12px 15px;padding-right:7px;border-radius:20px;border-top-right-radius:0;background-color:rgba(0,0,0,.8)}.pixnet-happix-pilot__launcher-bubble__btn_close_alpha{position:absolute;top:-25px;left:-17px;cursor:pointer}.pixnet-happix-pilot__launcher-bubble__hidden{display:inline-block;overflow:hidden;width:60%;height:60px;font-size:10px;opacity:.1;visibility:hidden;-webkit-transform:translateX(30px);transform:translateX(30px);-webkit-transition:width .2s linear,opacity .3s linear,visibility .2s linear,-webkit-transform .2s linear;transition:width .2s linear,opacity .3s linear,visibility .2s linear,-webkit-transform .2s linear;transition:width .2s linear,opacity .3s linear,visibility .2s linear,transform .2s linear;transition:width .2s linear,opacity .3s linear,visibility .2s linear,transform .2s linear,-webkit-transform .2s linear}.pixnet-happix-pilot__launcher-bubble__btn_happix_ufo{position:absolute;right:10px;bottom:0;width:70px;height:80px;-o-object-fit:contain;object-fit:contain;cursor:pointer}}");var Ri=function(e){function n(e){var i;return t(this,n),(i=we(this,Be(n).call(this,e))).happixMessengerData={data:{},setDataFlag:!1},i.showHappixMessenger=i.showHappixMessenger.bind(ke(ke(i))),i.hideHappixMessenger=i.hideHappixMessenger.bind(ke(ke(i))),i.clickHappix=i.clickHappix.bind(ke(ke(i))),i}return je(n,Le),S(n,[{key:"getTemplate",value:function(){var t=this.getCssPrefix(),e=Ue.getOptions();return'\n            <div class="'.concat(t,'__launcher-bubble" \n                style="max-width: ').concat(e.getPilotWidth(),"px; z-index: ").concat(e.getPilotZIndex(),'"\n            >                \n                <div \n                    class="').concat(t,"__launcher-bubble__noti_container \n                            ").concat(t,'__launcher-bubble__hidden"\n                >\n                    <div class="').concat(t,'__launcher-bubble__noti_msg"\n                    >   \n                        <div class="').concat(t,'__launcher-bubble__noti_msg-text">嗨～點一點領航員Happix的頭，有專屬於你的會員驚喜喲！</div>\n                        \n                        <img \n                            class="').concat(t,'__launcher-bubble__btn_close_alpha" \n                            src="').concat($e,'/btn-close-alpha.svg"\n                        >         \n                        <div>                                \n                            <img\n                                class="decoration"\n                                src="').concat($e,'/conversation_black@2x.png"\n                                srcset="').concat($e,'/conversation_black@3x.png 3x"\n                                width="8"\n                                height="16"\n                            >\n                        </div>\n                    </div>                    \n                </div>\n                <img \n                    class="').concat(t,'__launcher-bubble__btn_happix_ufo" \n                    src="').concat($e,'/btn-happix-ufo.png"\n                    srcset="').concat($e,"/btn-happix-ufo@2x.png 2x,\n                            ").concat($e,'/btn-happix-ufo@3x.png 3x"\n                >\n                <div class="').concat(t,'__launcher-bubble__happix-messenger"></div>\n            </div>')}},{key:"getElements",value:function(){this.launchBubbleContainerElement=tn.getElementByPostfix("launcher-bubble"),this.happix=this.launchBubbleContainerElement.getElementByPostfix("launcher-bubble__btn_happix_ufo"),this.notificationContainerElement=this.launchBubbleContainerElement.getElementByPostfix("launcher-bubble__noti_container"),this.notificationMsg=this.launchBubbleContainerElement.getElementByPostfix("launcher-bubble__noti_msg"),this.notificationMsgText=this.launchBubbleContainerElement.getElementByPostfix("launcher-bubble__noti_msg-text"),this.closeBtn=this.launchBubbleContainerElement.getElementByPostfix("launcher-bubble__btn_close_alpha"),this.happixMessengerElement=this.launchBubbleContainerElement.getElementByPostfix("launcher-bubble__happix-messenger")}},{key:"bindEvents",value:function(){this.happixMessengerElement.bindEvent("close",this.hideHappixMessenger)}},{key:"setData",value:function(t,e,n,i,o){this.happixMessengerData.data={weather:t,memberInfo:e,coupon:n,task:i},this.notificationMsgText.setHTML(o),this.closeBtn=this.launchBubbleContainerElement.getElementByPostfix("launcher-bubble__btn_close_alpha"),this.bindCloseEvent()}},{key:"expandNotification",value:function(){if(!Ii("pilot_bar_happix_noti_showed_timestamp",168)){var t=this.getCssPrefix();this.notificationContainerElement.removeClass("".concat(t,"__launcher-bubble__hidden")),xn("pilot_bar_happix_noti_showed_timestamp",fn.now()),sn({category:"pilot-happixSpeak",action:"happixImpression"})}}},{key:"collapseNotification",value:function(){var t=this.getCssPrefix();this.notificationContainerElement.addClass("".concat(t,"__launcher-bubble__hidden"))}},{key:"saveNotificationClickTime",value:function(){var t=fn.now();xn("pilot_bubble_click_timestamp",t)}},{key:"bindCloseEvent",value:function(){var t=this;this.closeBtn.bindEvent("click",function(e){e.stopPropagation(),t.collapseNotification(),sn({category:"pilot-happixSpeak",action:"happixClose"})})}},{key:"bindNotificationMsgEvent",value:function(){var t=this;this.notificationMsg.bindEvent("click",function(){t.saveNotificationClickTime(),t.showHappixMessenger()})}},{key:"bindHappixEvent",value:function(){this.happix.bindEvent("click",this.clickHappix)}},{key:"clickHappix",value:function(){this.showHappixMessenger(),sn({category:"pilot-happixSpeak",action:"happixClick"})}},{key:"showHappixMessenger",value:function(){var t=this.happixMessengerData,e=t.data;t.setDataFlag||(this.happixMessenger.setData(e),this.happixMessengerData.setDataFlag=!0),this.happixMessenger.show()}},{key:"hideHappixMessenger",value:function(){this.happixMessenger.hide()}},{key:"render",value:function(){return this.containerElement.setHTML(this.getTemplate()),this.getElements(),this.bindEvents(),this.bindHappixEvent(),this.happixMessenger=new Mn(this.happixMessengerElement).render().hide(),Ii("pilot_bubble_click_timestamp",24)||(this.expandNotification(),this.bindNotificationMsgEvent()),this}}]),n}(),Gi="desktop"===window.deviceType,Wi=document.createElement("div"),Yi=Gi?".main-container":"#main-content",qi=Gi?"bubble":"bar";Wi.id="pilot",document.querySelector(Yi).appendChild(Wi);var Ui=pix.domain_append?"http":"https";window.PixnetHappixPilot=new function(t,e){return{create:function(){var n=tn.getElementBySelector(t);Ue.setOptions(e),en();var i=Ue.getOptions().getVariant(),o=null;return"bar"===i?o=new Di(n).render():"bubble"===i&&(o=new Ri(n).render()),function t(){void 0!==(window.pix||{}).member_token?Li.sendHappixAPI("get","/pilot-data").then(function(t){var e=t.pilot_content,n=e.weather,i=e.member_info,a=e.coupon,r=e.task,s=e.guide_message;(function(t){var e=Ue.getOptions();e.isIncludeGAScript()&&(nn(e.getTrackingId()),t&&rn(t)),e.isIncludePAScript()&&an(e.getVenue(),t)})(i.member_uniqid),Ue.setOptions({memberUniqid:i.member_uniqid}),o&&o.setData(n,i,a,r,s)}).catch(function(t){console.log(t)}):setTimeout(function(){t()},100)}(),o}}}("#pilot",{variant:qi,projectName:"blog",domainAppend:"",loginURL:Ui+"://panel.pixnet.cc"+pix.domain_append+"/login/openid?openid="+Ui+"%3A%2F%2Fmember.pixnet.cc"+pix.domain_append+"%2Flogin&easy_login=1&done="+(encodeURIComponent(window.location.href)||"")+"&from_service=Blog",logoutURL:Ui+"://panel.pixnet.cc"+pix.domain_append+"/logout?done="+Ui+"%3A%2F%2Fmember.pixnet.cc"+pix.domain_append+"%2Flogout%3Fdone%3D"+(encodeURIComponent(window.location.href)||""),ga:{isIncludeGAScript:!0,trackingId:"UA-408650-39"},pa:{isIncludePAScript:!0,venue:"pixnet"},style:{zIndex:{pilotZIndex:Gi?1e8:99999},width:{pilotWidth:960}}}).create()}();
